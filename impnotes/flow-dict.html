<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</title><link rel="stylesheet" href="impnotes.css" type="text/css" /><link rev="made" href="mailto:clisp-list@sf.net" /><meta name="generator" content="DocBook XSL Stylesheets V1.65.1" /><link rel="home" href="index.html" title="Implementation Notes for GNU CLISP." /><link rel="up" href="data.html" title="Chapter 5. Data and Control Flow&#10;   [CLHS-5]" /><link rel="previous" href="data.html" title="Chapter 5. Data and Control Flow&#10;   [CLHS-5]" /><link rel="next" href="iteration.html" title="Chapter 6. Iteration&#10;   [CLHS-6]" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="data.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Data and Control Flow
   [CLHS-5]</th><td width="20%" align="right"> <a accesskey="n" href="iteration.html">Next</a></td></tr></table><hr /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="flow-dict"></a>5.1. The Data and Control Flow Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_data__w_dictionary.html" target="_top">[CLHS-5.3]</a></h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="flow-dict.html#fcase">5.1.1. Macro EXT:FCASE</a></span></dt><dt><span class="section"><a href="flow-dict.html#xor">5.1.2. Function EXT:XOR</a></span></dt><dt><span class="section"><a href="flow-dict.html#eq">5.1.3. Function <tt class="function">EQ</tt></a></span></dt><dt><span class="section"><a href="flow-dict.html#sym-fun">5.1.4. Function <tt class="function">SYMBOL-FUNCTION</tt></a></span></dt><dt><span class="section"><a href="flow-dict.html#setf">5.1.5. Macro <tt class="function">SETF</tt></a></span></dt><dt><span class="section"><a href="flow-dict.html#func">5.1.6. Special Operator <tt class="function">FUNCTION</tt></a></span></dt><dt><span class="section"><a href="flow-dict.html#def-sym-mac">5.1.7. Macro <tt class="function">DEFINE-SYMBOL-MACRO</tt></a></span></dt><dt><span class="section"><a href="flow-dict.html#lambda">5.1.8. Macro <tt class="function">LAMBDA</tt></a></span></dt><dt><span class="section"><a href="flow-dict.html#defun">5.1.9. Macros <tt class="function">DEFUN</tt> &amp; <tt class="function">DEFMACRO</tt></a></span></dt></dl></div><p><a id="fle"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_function-_a-expression.html" target="_top"><tt class="function">FUNCTION-LAMBDA-EXPRESSION</tt></a>. </b>The <i class="replaceable"><tt>name</tt></i> of a <a href="dffi.html" title="30.3. Extensions-2.3. The Foreign Function Call Facility"><tt class="classname">FFI:FOREIGN-FUNCTION</tt></a> is a <span class="emphasis"><em>string</em></span>
(the name of the underlying <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><b class="command">C</b></span></a> function), not a lisp
<a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a>.
</p><p><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_destructuring-bind.html" target="_top"><tt class="function">DESTRUCTURING-BIND</tt></a>. </b>This macro does not perform full error checking.</p><p><b>Macros <a href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html" target="_top"><tt class="function">PROG1</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html" target="_top"><tt class="function">PROG2</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_and.html" target="_top"><tt class="function">AND</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><tt class="function">OR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_psetq.html" target="_top"><tt class="function">PSETQ</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><tt class="function">WHEN</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><tt class="function">UNLESS</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_cond.html" target="_top"><tt class="function">COND</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html" target="_top"><tt class="function">CASE</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html" target="_top"><tt class="function">MULTIPLE-VALUE-LIST</tt></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html" target="_top"><tt class="function">MULTIPLE-VALUE-BIND</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-setq.html" target="_top"><tt class="function">MULTIPLE-VALUE-SETQ</tt></a>. </b>These macros are implemented as special operators (as permitted by
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html" target="_top">Section 3.1.2.1.2.2</a>)
 and, as such, are rather efficient.</p><p><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><tt class="function">DEFCONSTANT</tt></a>. </b>The initial value is <span class="emphasis"><em>not</em></span> evaluated at compile time,
 just like with <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFVAR</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><tt class="function">DEFPARAMETER</tt></a>.
 Use <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><tt class="function">EVAL-WHEN</tt></a> if you need the value at compile time.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcase"></a>5.1.1. Macro <tt class="function">EXT:FCASE</tt></h3></div></div><div></div></div><p>This macro allows specifying the test for <a href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html" target="_top"><tt class="function">CASE</tt></a>, e.g.,
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(fcase string= (subseq foo 0 (position #\Space foo))
  ("first" 1)
  (("second" "two") 2)
  (("true" "yes") t)
  (otherwise nil))
</pre></td></tr></table><p>
is the same as
</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let ((var (subseq foo 0 (position #\Space foo))))
  (cond ((string= var "first") 1)
        ((or (string= var "second") (string= var "two")) 2)
        ((or (string= var "true") (string= var "yes")) t)
        (t nil)))
</pre></td></tr></table><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="xor"></a>5.1.2. Function <tt class="function">EXT:XOR</tt></h3></div></div><div></div></div><p>This function checks that exactly one of its arguments is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>
 and, if this is the case, returns its value and index in the argument
 list as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>, otherwise returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eq"></a>5.1.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><tt class="function">EQ</tt></a> compares <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s and <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><tt class="classname">FIXNUM</tt></a>s as <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> does.
 No unnecessary copies are made of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><tt class="classname">CHARACTER</tt></a>s and <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>s.
 Nevertheless, one should use <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><tt class="function">EQL</tt></a> as it is more portable across <a href="http://www.lisp.org" target="_top"><span><b class="command">Common Lisp</b></span></a>
 implementations.</p><p><tt class="sexp">(let ((x y)) (eq x x))</tt> always
 returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, regardless of <i class="replaceable"><tt>y</tt></i>.</p><p>Note that <tt class="sexp">(eq x x)</tt> might not be
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> for a <a href="dffi.html#dffi-variables" title="30.3.4. Foreign variables"><tt class="classname">FFI:FOREIGN-VARIABLE</tt></a> <i class="replaceable"><tt>x</tt></i>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sym-fun"></a>5.1.4. Function <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a> <i class="replaceable"><tt>symbol</tt></i>)
 <i class="replaceable"><tt>object</tt></i>)</tt> requires <i class="replaceable"><tt>object</tt></i> to be either a function, a
 <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a> return value or a <a href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression" target="_top">lambda expression</a>.  The <a href="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression" target="_top">lambda expression</a>
 is thereby immediately converted to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><tt class="classname">FUNCTION</tt></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="setf"></a>5.1.5. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a></h3></div></div><div></div></div><p>Additional <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s:
</p><div class="variablelist"><dl><dt><a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a></dt><dd><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> #'<i class="replaceable"><tt>symbol</tt></i> ...)
     <i class="replaceable"><tt>object</tt></i>)</tt>
    and
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><tt class="function">FUNCALL</tt></a> '<i class="replaceable"><tt>symbol</tt></i> ...)
     <i class="replaceable"><tt>object</tt></i>)</tt>
   are equivalent to
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<i class="replaceable"><tt>symbol</tt></i> ...) <i class="replaceable"><tt>object</tt></i>)</tt>.
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><tt class="function">PROGN</tt></a> <i class="replaceable"><tt>form</tt></i> ... <i class="replaceable"><tt>place</tt></i>)
                                <i class="replaceable"><tt>object</tt></i>)</tt>
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><tt class="function">LOCALLY</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><tt class="function">LOCALLY</tt></a> <i class="replaceable"><tt>declaration</tt></i> ... <i class="replaceable"><tt>form</tt></i> ...
                                 <i class="replaceable"><tt>place</tt></i>) <i class="replaceable"><tt>object</tt></i>)</tt>
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/speope_if.html" target="_top"><tt class="function">IF</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_if.html" target="_top"><tt class="function">IF</tt></a> <i class="replaceable"><tt>condition</tt></i>
                                  <i class="replaceable"><tt>place<sub>1</sub></tt></i>
                                  <i class="replaceable"><tt>place<sub>2</sub></tt></i>)
                                <i class="replaceable"><tt>object</tt></i>)</tt>
  </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><tt class="function">GET-DISPATCH-MACRO-CHARACTER</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><tt class="function">GET-DISPATCH-MACRO-CHARACTER</tt></a> ...)
     ...)</tt> calls <a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><tt class="function">SET-DISPATCH-MACRO-CHARACTER</tt></a>.
  </dd><dt><a href="num-concepts.html#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>:</dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="num-concepts.html#lfd"><tt class="function">EXT:LONG-FLOAT-DIGITS</tt></a>) <i class="replaceable"><tt>digits</tt></i>)</tt> sets the
    default mantissa length of long floats to <i class="replaceable"><tt>digits</tt></i> bits.
   </dd><dt><a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a></dt><dd>
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a>
       <i class="replaceable"><tt>list</tt></i>) <i class="replaceable"><tt>form</tt></i>)</tt>
    is equivalent to
   <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><tt class="function">VALUES-LIST</tt></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> <i class="replaceable"><tt>list</tt></i>
    (<a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html" target="_top"><tt class="function">MULTIPLE-VALUE-LIST</tt></a> <i class="replaceable"><tt>form</tt></i>)))</tt>
  </dd></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> markers in <a href="http://www.lisp.org/HyperSpec/Body/mac_defsetf.html" target="_top"><tt class="function">DEFSETF</tt></a> <a href="lalist.html" title="3.4. Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s are supported, but the
 corresponding keywords must appear literally in the program text.</p><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html" target="_top"><tt class="function">GET-SETF-EXPANSION</tt></a> <i class="replaceable"><tt>form</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 <i class="replaceable"><tt>env</tt></i>)</tt>, <tt class="sexp">(EXT:GET-SETF-METHOD <i class="replaceable"><tt>form</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 <i class="replaceable"><tt>env</tt></i>)</tt>, and <tt class="sexp">(EXT:GET-SETF-METHOD-MULTIPLE-VALUE <i class="replaceable"><tt>form</tt></i> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a>
 <i class="replaceable"><tt>env</tt></i>)</tt> receive as optional argument <i class="replaceable"><tt>env</tt></i>
 the environment necessary for macro expansions.  In
 <a href="http://www.lisp.org/HyperSpec/Body/mac_define-setf-expander.html" target="_top"><tt class="function">DEFINE-SETF-EXPANDER</tt></a> and <tt class="function">EXT:DEFINE-SETF-METHOD</tt>
 <a href="lalist.html" title="3.4. Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s, one can specify <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a> and a variable, which will
 be bound to the environment.  This environment should be passed to all
 calls of <a href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html" target="_top"><tt class="function">GET-SETF-EXPANSION</tt></a>,
 <tt class="function">EXT:GET-SETF-METHOD</tt> and
 <tt class="function">EXT:GET-SETF-METHOD-MULTIPLE-VALUE</tt>.  If this is
 done, even local macros will be interpreted as places correctly.</p><p>Attempts to modify read-only data will <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
 Program text and quoted constants loaded from files are considered
 read-only data.  This check is only performed for strings, not for
 conses, other kinds of arrays, and user-defined data types.</p><p>See also the <a href="macros3.html#letf"><tt class="function">EXT:LETF</tt></a> and <a href="macros3.html#letf"><tt class="function">EXT:LETF*</tt></a> macros.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="func"></a>5.1.6. Special Operator <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a></h3></div></div><div></div></div><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><tt class="function">FUNCTION</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt> returns the
 local function definition established by <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">FLET</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><tt class="function">LABELS</tt></a>, if it
 exists, otherwise the global function definition.</p><p><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/fun_special-operator-p.html" target="_top"><tt class="function">SPECIAL-OPERATOR-P</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt>
 returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.  If it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>, then <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><tt class="function">SYMBOL-FUNCTION</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt> returns the
 (useless) special operator handler.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="def-sym-mac"></a>5.1.7. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="function">DEFINE-SYMBOL-MACRO</tt></a></h3></div></div><div></div></div><p>The macro <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="function">DEFINE-SYMBOL-MACRO</tt></a> establishes <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>s with
 global scope (as opposed to <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>s defined with
 <a href="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html" target="_top"><tt class="function">SYMBOL-MACROLET</tt></a>, which have local scope):
 <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="function">DEFINE-SYMBOL-MACRO</tt></a> <i class="replaceable"><tt>symbol</tt></i>
 <i class="replaceable"><tt>expansion</tt></i>)</tt>.</p><p>The function
 <strong class="first"><i class="firstterm"><a href="flow-dict.html#symbol-mex"><tt class="function">EXT:SYMBOL-MACRO-EXPAND</tt></a><a id="symbol-mex" class="indexterm"></a></i></strong>
 tests for a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>: If <i class="replaceable"><tt>symbol</tt></i> is defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>,
 <tt class="sexp">(<a href="flow-dict.html#symbol-mex"><tt class="function">EXT:SYMBOL-MACRO-EXPAND</tt></a> <i class="replaceable"><tt>symbol</tt></i>)</tt> returns two
 values, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a> and the expansion; otherwise it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_boundp.html" target="_top"><tt class="function">BOUNDP</tt></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> returns
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html" target="_top"><tt class="function">SYMBOL-VALUE</tt></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 returns the value of the expansion.  Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_set.html" target="_top"><tt class="function">SET</tt></a> on a symbol defined
 as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> calls <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><tt class="function">SETF</tt></a> on the expansion.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_makunbound.html" target="_top"><tt class="function">MAKUNBOUND</tt></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a>
 removes the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><tt class="classname">SYMBOL-MACRO</tt></a> definition.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="lambda"></a>5.1.8. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><tt class="function">LAMBDA</tt></a></h3></div></div><div></div></div><p><b>Constant <a href="http://www.lisp.org/HyperSpec/Body/convar_lambda_ist-keywords.html" target="_top"><tt class="constant">LAMBDA-LIST-KEYWORDS</tt></a>. </b><tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;REST</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a>
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;ALLOW-OTHER-KEYS</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;AUX</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;BODY</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;WHOLE</tt></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><tt class="literal">&amp;ENVIRONMENT</tt></a>)
</tt></p><div class="table"><a id="values-limits-table"></a><p class="title"><b>Table 5.1. Function call limits</b></p><table summary="Function call limits" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_call-a_uments-limit.html" target="_top"><tt class="constant">CALL-ARGUMENTS-LIMIT</tt></a></td><td align="center">2<sup>12</sup>=4096</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_multip_values-limit.html" target="_top"><tt class="constant">MULTIPLE-VALUES-LIMIT</tt></a></td><td align="center">2<sup>7</sup>=128</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_lambda_meters-limit.html" target="_top"><tt class="constant">LAMBDA-PARAMETERS-LIMIT</tt></a></td><td align="center">2<sup>12</sup>=4096</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defun"></a>5.1.9. Macros <a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a></h3></div></div><div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><tt class="function">DEFUN</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><tt class="function">DEFMACRO</tt></a> are allowed in non-toplevel positions. As
 an example, consider the old ([<span class="citation"><a href="references.html#CLtL1">CLtL1</a></span>]) definition of <a href="http://www.lisp.org/HyperSpec/Body/fun_gensym.html" target="_top"><tt class="function">GENSYM</tt></a>:</p><table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
(let ((gensym-prefix "G")
      (gensym-count 1))
  (defun gensym (&amp;optional (x nil s))
    (when s
      (cond ((stringp x) (setq gensym-prefix x))
            ((integerp x)
             (if (minusp x)
               (error "~S: index ~S is negative" 'gensym x)
               (setq gensym-count x)))
            (t (error "~S: argument ~S of wrong type" 'gensym x))))
    (prog1
      (make-symbol
        (concatenate 'string
          gensym-prefix
          (write-to-string gensym-count :base 10 :radix nil)))
      (incf gensym-count))))
</pre></td></tr></table><p><a id="suppress-check-redef"></a><b>Variable <a href="flow-dict.html#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a>. </b>When <strong class="first"><i class="firstterm"><a href="flow-dict.html#suppress-check-redef"><tt class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</tt></a></i></strong> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
 <a href="http://clisp.cons.org" target="_top"><span><b class="command">CLISP</b></span></a> issues a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><tt class="classname">WARNING</tt></a> when a function (macro, variable, class,
 etc) is redefined in a different file than its original definition.
 It is <span class="emphasis"><em>not</em></span> a good idea to set this variable to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>.
</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="data.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="data.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="iteration.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 5. Data and Control Flow
   [CLHS-5] </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 6. Iteration
   [CLHS-6]</td></tr></table></div><div class="custom-footer"><hr width="100%" /><table width="100%"><tr><td align="left"><a href="http://clisp.cons.org"><img src="clisp.png" width="48" height="48" alt="[CLISP home]" /></a></td><td align="center"><a href="http://www.gnu.org"><img src="http://www.gnu.org/graphics/gnubanner.jpg" width="468" height="60" alt="[Come and see what GNU creates for YOU]" /></a></td><td align="right"><a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=1355&amp;amp;type=2" width="125" height="37" alt="[SourceForge]" /></a></td></tr></table></div></body></html>
