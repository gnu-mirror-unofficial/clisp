<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Data and Control Flow
   [CLHS-5]</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REV="MADE"
HREF="mailto:clisp-list@sf.net"><LINK
REL="HOME"
TITLE="Implementation Notes for GNU CLISP."
HREF="impnotes-top.html"><LINK
REL="UP"
TITLE="Chapters or the Common Lisp HyperSpec"
HREF="clhs-chapters.html"><LINK
REL="PREVIOUS"
TITLE="The Types and Classes Dictionary
  [CLHS-4.4]"
HREF="type-class-dict.html"><LINK
REL="NEXT"
TITLE="Iteration
   [CLHS-6]"
HREF="iteration.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="impnotes.css"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Implementation Notes for <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.: These notes document <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> version 2.31.</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="type-class-dict.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="iteration.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="data"
></A
>Chapter 5. Data and Control Flow
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-5.html"
TARGET="_top"
>[CLHS-5]</A
></H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>5.1. <A
HREF="data.html#flow-dict"
>The Data and Control Flow Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_data__w_dictionary.html"
TARGET="_top"
>[CLHS-5.3]</A
></A
></DT
></DL
></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="flow-dict"
></A
>5.1. The Data and Control Flow Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_data__w_dictionary.html"
TARGET="_top"
>[CLHS-5.3]</A
></H1
><DIV
CLASS="formalpara"
><P
><A
NAME="fle"
></A
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_function-_a-expression.html"
TARGET="_top"
><TT
CLASS="function"
>FUNCTION-LAMBDA-EXPRESSION</TT
></A
>. </B
>The <TT
CLASS="replaceable"
><I
>name</I
></TT
> of a <A
HREF="dffi.html"
><TT
CLASS="classname"
>FFI:FOREIGN-FUNCTION</TT
></A
> is a <I
CLASS="emphasis"
>string</I
>
(the name of the underlying <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function), not a lisp
<A
HREF="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name"
TARGET="_top"
>function name</A
>.
</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_destructuring-bind.html"
TARGET="_top"
><TT
CLASS="function"
>DESTRUCTURING-BIND</TT
></A
>. </B
>This macro does not perform full error checking.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Macros <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html"
TARGET="_top"
><TT
CLASS="function"
>PROG1</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html"
TARGET="_top"
><TT
CLASS="function"
>PROG2</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_and.html"
TARGET="_top"
><TT
CLASS="function"
>AND</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_or.html"
TARGET="_top"
><TT
CLASS="function"
>OR</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_psetq.html"
TARGET="_top"
><TT
CLASS="function"
>PSETQ</TT
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html"
TARGET="_top"
><TT
CLASS="function"
>WHEN</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html"
TARGET="_top"
><TT
CLASS="function"
>UNLESS</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_cond.html"
TARGET="_top"
><TT
CLASS="function"
>COND</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html"
TARGET="_top"
><TT
CLASS="function"
>CASE</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html"
TARGET="_top"
><TT
CLASS="function"
>MULTIPLE-VALUE-LIST</TT
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html"
TARGET="_top"
><TT
CLASS="function"
>MULTIPLE-VALUE-BIND</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-setq.html"
TARGET="_top"
><TT
CLASS="function"
>MULTIPLE-VALUE-SETQ</TT
></A
>. </B
>These macros are implemented as special operators (as permitted by
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html"
TARGET="_top"
>Section 3.1.2.1.2.2</A
>)
 and, as such, are rather efficient.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
TARGET="_top"
><TT
CLASS="function"
>DEFCONSTANT</TT
></A
>. </B
>The initial value is <I
CLASS="emphasis"
>not</I
> evaluated at compile time,
 just like with <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html"
TARGET="_top"
><TT
CLASS="function"
>DEFVAR</TT
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html"
TARGET="_top"
><TT
CLASS="function"
>DEFPARAMETER</TT
></A
>.
 Use <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
TARGET="_top"
><TT
CLASS="function"
>EVAL-WHEN</TT
></A
> if you need the value at compile time.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="fcase"
></A
>5.1.1. Macro <TT
CLASS="function"
>EXT:FCASE</TT
></H2
><P
ALIGN="justify"
>This macro allows specifying the test for <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html"
TARGET="_top"
><TT
CLASS="function"
>CASE</TT
></A
>, e.g.,
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(fcase string= (subseq foo 0 (position #\Space foo))
  ("first" 1)
  (("second" "two") 2)
  (("true" "yes") t)
  (otherwise nil))
</PRE
></TD
></TR
></TABLE
>
is the same as
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(let ((var (subseq foo 0 (position #\Space foo))))
  (cond ((string= var "first") 1)
        ((or (string= var "second") (string= var "two")) 2)
        ((or (string= var "true") (string= var "yes")) t)
        (t nil)))
</PRE
></TD
></TR
></TABLE
>
</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="xor"
></A
>5.1.2. Function <TT
CLASS="function"
>EXT:XOR</TT
></H2
><P
ALIGN="justify"
>This function checks that exactly one of its arguments is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>
 and, if this is the case, returns its value and index in the argument
 list as <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>, otherwise returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="eq"
></A
>5.1.3. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><TT
CLASS="function"
>EQ</TT
></A
></H2
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><TT
CLASS="function"
>EQ</TT
></A
> compares <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><TT
CLASS="classname"
>CHARACTER</TT
></A
>s and <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><TT
CLASS="classname"
>FIXNUM</TT
></A
>s as <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><TT
CLASS="function"
>EQL</TT
></A
> does.
 No unnecessary copies are made of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><TT
CLASS="classname"
>CHARACTER</TT
></A
>s and <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><TT
CLASS="classname"
>NUMBER</TT
></A
>s.
 Nevertheless, one should use <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><TT
CLASS="function"
>EQL</TT
></A
> as it is more portable across <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
>
 implementations.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(let ((x y)) (eq x x))</TT
> always
 returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>, regardless of <TT
CLASS="replaceable"
><I
>y</I
></TT
>.</P
><P
ALIGN="justify"
>Note that <TT
CLASS="sexp"
>(eq x x)</TT
> might not be
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
> for a <A
HREF="dffi.html#dffi-variables"
><TT
CLASS="classname"
>FFI:FOREIGN-VARIABLE</TT
></A
> <TT
CLASS="replaceable"
><I
>x</I
></TT
>.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="sym-fun"
></A
>5.1.4. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><TT
CLASS="function"
>SYMBOL-FUNCTION</TT
></A
></H2
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><TT
CLASS="function"
>SYMBOL-FUNCTION</TT
></A
> <TT
CLASS="replaceable"
><I
>symbol</I
></TT
>)
 <TT
CLASS="replaceable"
><I
>object</I
></TT
>)</TT
> requires <TT
CLASS="replaceable"
><I
>object</I
></TT
> to be either a function, a
 <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><TT
CLASS="function"
>SYMBOL-FUNCTION</TT
></A
> return value or a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
TARGET="_top"
>lambda expression</A
>.  The <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
TARGET="_top"
>lambda expression</A
>
 is thereby immediately converted to a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><TT
CLASS="classname"
>FUNCTION</TT
></A
>.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="setf"
></A
>5.1.5. Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
></H2
><P
ALIGN="justify"
>Additional <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
>s:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><TT
CLASS="function"
>FUNCALL</TT
></A
></DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><TT
CLASS="function"
>FUNCALL</TT
></A
> #'<TT
CLASS="replaceable"
><I
>symbol</I
></TT
> ...)
     <TT
CLASS="replaceable"
><I
>object</I
></TT
>)</TT
>
    and
   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><TT
CLASS="function"
>FUNCALL</TT
></A
> '<TT
CLASS="replaceable"
><I
>symbol</I
></TT
> ...)
     <TT
CLASS="replaceable"
><I
>object</I
></TT
>)</TT
>
   are equivalent to
   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<TT
CLASS="replaceable"
><I
>symbol</I
></TT
> ...) <TT
CLASS="replaceable"
><I
>object</I
></TT
>)</TT
>.
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
TARGET="_top"
><TT
CLASS="function"
>PROGN</TT
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
TARGET="_top"
><TT
CLASS="function"
>PROGN</TT
></A
> <TT
CLASS="replaceable"
><I
>form</I
></TT
> ... <TT
CLASS="replaceable"
><I
>place</I
></TT
>)
                                <TT
CLASS="replaceable"
><I
>object</I
></TT
>)</TT
>
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/speope_locally.html"
TARGET="_top"
><TT
CLASS="function"
>LOCALLY</TT
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_locally.html"
TARGET="_top"
><TT
CLASS="function"
>LOCALLY</TT
></A
> <TT
CLASS="replaceable"
><I
>declaration</I
></TT
> ... <TT
CLASS="replaceable"
><I
>form</I
></TT
> ...
                                 <TT
CLASS="replaceable"
><I
>place</I
></TT
>) <TT
CLASS="replaceable"
><I
>object</I
></TT
>)</TT
>
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/speope_if.html"
TARGET="_top"
><TT
CLASS="function"
>IF</TT
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_if.html"
TARGET="_top"
><TT
CLASS="function"
>IF</TT
></A
> <TT
CLASS="replaceable"
><I
>condition</I
></TT
>
                                  <TT
CLASS="replaceable"
><I
>place<SUB
>1</SUB
></I
></TT
>
                                  <TT
CLASS="replaceable"
><I
>place<SUB
>2</SUB
></I
></TT
>)
                                <TT
CLASS="replaceable"
><I
>object</I
></TT
>)</TT
>
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html"
TARGET="_top"
><TT
CLASS="function"
>GET-DISPATCH-MACRO-CHARACTER</TT
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html"
TARGET="_top"
><TT
CLASS="function"
>GET-DISPATCH-MACRO-CHARACTER</TT
></A
> ...)
     ...)</TT
> calls <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html"
TARGET="_top"
><TT
CLASS="function"
>SET-DISPATCH-MACRO-CHARACTER</TT
></A
>.
  </P
></DD
><DT
><A
HREF="num-concepts.html#lfd"
><TT
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</TT
></A
>:</DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="num-concepts.html#lfd"
><TT
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</TT
></A
>) <TT
CLASS="replaceable"
><I
>digits</I
></TT
>)</TT
> sets the
    default mantissa length of long floats to <TT
CLASS="replaceable"
><I
>digits</I
></TT
> bits.
   </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
TARGET="_top"
><TT
CLASS="function"
>VALUES-LIST</TT
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
TARGET="_top"
><TT
CLASS="function"
>VALUES-LIST</TT
></A
>
       <TT
CLASS="replaceable"
><I
>list</I
></TT
>) <TT
CLASS="replaceable"
><I
>form</I
></TT
>)</TT
>
    is equivalent to
   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
TARGET="_top"
><TT
CLASS="function"
>VALUES-LIST</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> <TT
CLASS="replaceable"
><I
>list</I
></TT
>
    (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html"
TARGET="_top"
><TT
CLASS="function"
>MULTIPLE-VALUE-LIST</TT
></A
> <TT
CLASS="replaceable"
><I
>form</I
></TT
>)))</TT
>
  </P
></DD
></DL
></DIV
></P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> markers in <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defsetf.html"
TARGET="_top"
><TT
CLASS="function"
>DEFSETF</TT
></A
> <A
HREF="lalist.html"
>lambda list</A
>s are supported, but the
 corresponding keywords must appear literally in the program text.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html"
TARGET="_top"
><TT
CLASS="function"
>GET-SETF-EXPANSION</TT
></A
> <TT
CLASS="replaceable"
><I
>form</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
 <TT
CLASS="replaceable"
><I
>env</I
></TT
>)</TT
>, <TT
CLASS="sexp"
>(EXT:GET-SETF-METHOD <TT
CLASS="replaceable"
><I
>form</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
 <TT
CLASS="replaceable"
><I
>env</I
></TT
>)</TT
>, and <TT
CLASS="sexp"
>(EXT:GET-SETF-METHOD-MULTIPLE-VALUE <TT
CLASS="replaceable"
><I
>form</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
 <TT
CLASS="replaceable"
><I
>env</I
></TT
>)</TT
> receive as optional argument <TT
CLASS="replaceable"
><I
>env</I
></TT
>
 the environment necessary for macro expansions.  In
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-setf-expander.html"
TARGET="_top"
><TT
CLASS="function"
>DEFINE-SETF-EXPANDER</TT
></A
> and <TT
CLASS="function"
>EXT:DEFINE-SETF-METHOD</TT
>
 <A
HREF="lalist.html"
>lambda list</A
>s, one can specify <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;ENVIRONMENT</TT
></A
> and a variable, which will
 be bound to the environment.  This environment should be passed to all
 calls of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html"
TARGET="_top"
><TT
CLASS="function"
>GET-SETF-EXPANSION</TT
></A
>,
 <TT
CLASS="function"
>EXT:GET-SETF-METHOD</TT
> and
 <TT
CLASS="function"
>EXT:GET-SETF-METHOD-MULTIPLE-VALUE</TT
>.  If this is
 done, even local macros will be interpreted as places correctly.</P
><P
ALIGN="justify"
>Attempts to modify read-only data will <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><TT
CLASS="function"
>SIGNAL</TT
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><TT
CLASS="classname"
>ERROR</TT
></A
>.
 Program text and quoted constants loaded from files are considered
 read-only data.  This check is only performed for strings, not for
 conses, other kinds of arrays, and user-defined data types.</P
><P
ALIGN="justify"
>See also the <A
HREF="macros3.html#letf"
><TT
CLASS="function"
>EXT:LETF</TT
></A
> and <A
HREF="macros3.html#letf"
><TT
CLASS="function"
>EXT:LETF*</TT
></A
> macros.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="func"
></A
>5.1.6. Special Operator <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_function.html"
TARGET="_top"
><TT
CLASS="function"
>FUNCTION</TT
></A
></H2
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_function.html"
TARGET="_top"
><TT
CLASS="function"
>FUNCTION</TT
></A
> <TT
CLASS="replaceable"
><I
>symbol</I
></TT
>)</TT
> returns the
 local function definition established by <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
TARGET="_top"
><TT
CLASS="function"
>FLET</TT
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
TARGET="_top"
><TT
CLASS="function"
>LABELS</TT
></A
>, if it
 exists, otherwise the global function definition.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_special-operator-p.html"
TARGET="_top"
><TT
CLASS="function"
>SPECIAL-OPERATOR-P</TT
></A
> <TT
CLASS="replaceable"
><I
>symbol</I
></TT
>)</TT
>
 returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>.  If it returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>, then <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><TT
CLASS="function"
>SYMBOL-FUNCTION</TT
></A
> <TT
CLASS="replaceable"
><I
>symbol</I
></TT
>)</TT
> returns the
 (useless) special operator handler.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="def-sym-mac"
></A
>5.1.7. Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="function"
>DEFINE-SYMBOL-MACRO</TT
></A
></H2
><P
ALIGN="justify"
>The macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="function"
>DEFINE-SYMBOL-MACRO</TT
></A
> establishes <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL-MACRO</TT
></A
>s with
 global scope (as opposed to <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL-MACRO</TT
></A
>s defined with
 <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html"
TARGET="_top"
><TT
CLASS="function"
>SYMBOL-MACROLET</TT
></A
>, which have local scope):
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="function"
>DEFINE-SYMBOL-MACRO</TT
></A
> <TT
CLASS="replaceable"
><I
>symbol</I
></TT
>
 <TT
CLASS="replaceable"
><I
>expansion</I
></TT
>)</TT
>.</P
><P
ALIGN="justify"
>The function
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="data.html#symbol-mex"
><TT
CLASS="function"
>EXT:SYMBOL-MACRO-EXPAND</TT
></A
></I
></STRONG
>
 tests for a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL-MACRO</TT
></A
>: If <TT
CLASS="replaceable"
><I
>symbol</I
></TT
> is defined as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL-MACRO</TT
></A
>,
 <TT
CLASS="sexp"
>(<A
HREF="data.html#symbol-mex"
><TT
CLASS="function"
>EXT:SYMBOL-MACRO-EXPAND</TT
></A
> <TT
CLASS="replaceable"
><I
>symbol</I
></TT
>)</TT
> returns two
 values, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
> and the expansion; otherwise it returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>.</P
><P
ALIGN="justify"
>Calling <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_boundp.html"
TARGET="_top"
><TT
CLASS="function"
>BOUNDP</TT
></A
> on a symbol defined as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL-MACRO</TT
></A
> returns
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>.</P
><P
ALIGN="justify"
>Calling <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html"
TARGET="_top"
><TT
CLASS="function"
>SYMBOL-VALUE</TT
></A
> on a symbol defined as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL-MACRO</TT
></A
>
 returns the value of the expansion.  Calling <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_set.html"
TARGET="_top"
><TT
CLASS="function"
>SET</TT
></A
> on a symbol defined
 as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL-MACRO</TT
></A
> calls <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> on the expansion.</P
><P
ALIGN="justify"
>Calling <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_makunbound.html"
TARGET="_top"
><TT
CLASS="function"
>MAKUNBOUND</TT
></A
> on a symbol defined as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL-MACRO</TT
></A
>
 removes the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL-MACRO</TT
></A
> definition.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="lambda"
></A
>5.1.8. Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
TARGET="_top"
><TT
CLASS="function"
>LAMBDA</TT
></A
></H2
><DIV
CLASS="formalpara"
><P
><B
>Constant <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_lambda_ist-keywords.html"
TARGET="_top"
><TT
CLASS="constant"
>LAMBDA-LIST-KEYWORDS</TT
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;ALLOW-OTHER-KEYS</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;AUX</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;BODY</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;WHOLE</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;ENVIRONMENT</TT
></A
>)
</TT
></P
></DIV
><DIV
CLASS="table"
><A
NAME="values-limits-table"
></A
><P
><B
>Table 5-1. Function call limits</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_call-a_uments-limit.html"
TARGET="_top"
><TT
CLASS="constant"
>CALL-ARGUMENTS-LIMIT</TT
></A
></TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>2<SUP
>12</SUP
>=4096</TD
></TR
><TR
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_multip_values-limit.html"
TARGET="_top"
><TT
CLASS="constant"
>MULTIPLE-VALUES-LIMIT</TT
></A
></TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>2<SUP
>7</SUP
>=128</TD
></TR
><TR
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_lambda_meters-limit.html"
TARGET="_top"
><TT
CLASS="constant"
>LAMBDA-PARAMETERS-LIMIT</TT
></A
></TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>2<SUP
>12</SUP
>=4096</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="defun"
></A
>5.1.9. Macros <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defun.html"
TARGET="_top"
><TT
CLASS="function"
>DEFUN</TT
></A
> &#38; <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html"
TARGET="_top"
><TT
CLASS="function"
>DEFMACRO</TT
></A
></H2
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defun.html"
TARGET="_top"
><TT
CLASS="function"
>DEFUN</TT
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html"
TARGET="_top"
><TT
CLASS="function"
>DEFMACRO</TT
></A
> are allowed in non-toplevel positions. As
 an example, consider the old (<A
HREF="references.html#CLtL1"
>[<SPAN
CLASS="citation"
><A
HREF="references.html#CLtL1"
>CLtL1</A
></SPAN
>]</A
>) definition of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_gensym.html"
TARGET="_top"
><TT
CLASS="function"
>GENSYM</TT
></A
>:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(let ((gensym-prefix "G")
      (gensym-count 1))
  (defun gensym (&#38;optional (x nil s))
    (when s
      (cond ((stringp x) (setq gensym-prefix x))
            ((integerp x)
             (if (minusp x)
               (error "~S: index ~S is negative" 'gensym x)
               (setq gensym-count x)))
            (t (error "~S: argument ~S of wrong type" 'gensym x))))
    (prog1
      (make-symbol
        (concatenate 'string
          gensym-prefix
          (write-to-string gensym-count :base 10 :radix nil)))
      (incf gensym-count))))
</PRE
></TD
></TR
></TABLE
><DIV
CLASS="formalpara"
><P
><A
NAME="suppress-check-redef"
></A
><B
>Variable <A
HREF="data.html#suppress-check-redef"
><TT
CLASS="varname"
>CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</TT
></A
>. </B
>When <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="data.html#suppress-check-redef"
><TT
CLASS="varname"
>CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</TT
></A
></I
></STRONG
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>,
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> issues a <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_warning.html"
TARGET="_top"
><TT
CLASS="classname"
>WARNING</TT
></A
> when a function (macro, variable, class,
 etc) is redefined in a different file than its original definition.
 It is <I
CLASS="emphasis"
>not</I
> a good idea to set this variable to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>.
</P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="type-class-dict.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="impnotes-top.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="iteration.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>The Types and Classes Dictionary
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_types_s_dictionary.html"
TARGET="_top"
>[CLHS-4.4]</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="clhs-chapters.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Iteration
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-6.html"
TARGET="_top"
>[CLHS-6]</A
></TD
></TR
></TABLE
></DIV
><div
class="custom-footer"
><hr
width="100%"><table
width="100%"
><tr
><td
align="left"
><a
href="http://clisp.cons.org"
><img
src="clisp.png"
width="48"
height="48"
alt="[CLISP home]"></a
></td
><td
align="center"
><a
href="http://www.gnu.org"
><img
src="http://www.gnu.org/graphics/gnubanner.jpg"
width="468"
height="60"
alt="[Come and see what GNU creates for YOU]"></a
></td
><td
align="right"
><a
href="http://sourceforge.net"
><img
src="http://sourceforge.net/sflogo.php?group_id=1355&amp;type=2"
width="125"
height="37"
alt="[SourceForge]"></a
></td
></tr
></table
></div
></BODY
></HTML
>