<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>The Streams Dictionary
   [CLHS-21.2]</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REV="MADE"
HREF="mailto:clisp-list@sf.net"><LINK
REL="HOME"
TITLE="Implementation Notes for GNU CLISP."
HREF="impnotes-top.html"><LINK
REL="UP"
TITLE="Streams
   [CLHS-21]"
HREF="streams.html"><LINK
REL="PREVIOUS"
TITLE="Terminal interaction."
HREF="terminal.html"><LINK
REL="NEXT"
TITLE="Printer
   [CLHS-22]"
HREF="printer.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="impnotes.css"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Implementation Notes for <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.: These notes document <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> version 2.31.</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="terminal.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 21. Streams
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-21.html"
TARGET="_top"
>[CLHS-21]</A
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="printer.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="stream-dict"
></A
>21.3. The Streams Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_streams_dictionary.html"
TARGET="_top"
>[CLHS-21.2]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="stream-eltype"
></A
>21.3.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
></H2
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
>able. The <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> of
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
>s created by the functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><TT
CLASS="function"
>OPEN</TT
></A
>, <A
HREF="shell.html#pipe"
><TT
CLASS="function"
>EXT:MAKE-PIPE-INPUT-STREAM</TT
></A
>
  <A
HREF="shell.html#pipe"
><TT
CLASS="function"
>EXT:MAKE-PIPE-OUTPUT-STREAM</TT
></A
>, <A
HREF="shell.html#pipe"
><TT
CLASS="function"
>EXT:MAKE-PIPE-IO-STREAM</TT
></A
>, <A
HREF="socket.html#so-accept"
><TT
CLASS="function"
>SOCKET:SOCKET-ACCEPT</TT
></A
>, <A
HREF="socket.html#so-connect"
><TT
CLASS="function"
>SOCKET:SOCKET-CONNECT</TT
></A
>
  can be modified, if the old and the new <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>s are either
<P
></P
><UL
><LI
><P
ALIGN="justify"
>both equivalent to <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><TT
CLASS="classname"
>CHARACTER</TT
></A
> or
      <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>SIGNED-BYTE</TT
></A
> 8)</TT
>; or</P
></LI
><LI
><P
ALIGN="justify"
>both equivalent to <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> <TT
CLASS="replaceable"
><I
>n</I
></TT
>)</TT
> or
      <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>SIGNED-BYTE</TT
></A
> <TT
CLASS="replaceable"
><I
>n</I
></TT
>)</TT
>, with the same <TT
CLASS="replaceable"
><I
>n</I
></TT
>.</P
></LI
></UL
></P
><P
ALIGN="justify"
>Functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> and <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>)</TT
> are <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html"
TARGET="_top"
><TT
CLASS="classname"
>GENERIC-FUNCTION</TT
></A
>s, see
 section <A
HREF="clos-stream.html#gray"
>"Gray streams"</A
>.</P
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="bin-stdio"
></A
>21.3.1.1. Binary input from <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><TT
CLASS="varname"
>*STANDARD-INPUT*</TT
></A
></H3
><P
ALIGN="justify"
>Note that you cannot change <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> for some
 built-in streams, such as <A
HREF="terminal.html"
>terminal streams</A
>,
 which is normally the value of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><TT
CLASS="varname"
>*TERMINAL-IO*</TT
></A
>.
 Since <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><TT
CLASS="varname"
>*STANDARD-INPUT*</TT
></A
> normally is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html"
TARGET="_top"
><TT
CLASS="classname"
>SYNONYM-STREAM</TT
></A
> pointing
 to <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><TT
CLASS="varname"
>*TERMINAL-IO*</TT
></A
>, you cannot use <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
> in the it.</P
><P
ALIGN="justify"
>Since <A
HREF="http://hoohoo.ncsa.uiuc.edu/cgi/"
TARGET="_top"
>CGI</A
>
 (Common Gateway Interface) provides the form data for
 <B
CLASS="command"
>METHOD="POST"</B
> on the stdin,
 and the server will <I
CLASS="emphasis"
>not</I
> send you an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> on the end of the data,
 you will need to use
 <TT
CLASS="sexp"
>(<A
HREF="getenv.html"
><TT
CLASS="function"
>EXT:GETENV</TT
></A
> <TT
CLASS="envar"
>"CONTENT_LENGTH"</TT
>)</TT
>
 to determine how much data you should read from stdin.
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will detect that stdin is not a terminal and create a regular
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><TT
CLASS="classname"
>FILE-STREAM</TT
></A
> which can be passed to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>)</TT
>.
 To test this functionality interactively,
 you will need to open the standard input in the binary mode:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(let ((buf (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-array.html"
TARGET="_top"
><TT
CLASS="function"
>MAKE-ARRAY</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-integer.html"
TARGET="_top"
><TT
CLASS="function"
>PARSE-INTEGER</TT
></A
> (<A
HREF="getenv.html"
><TT
CLASS="function"
>EXT:GETENV</TT
></A
> "CONTENT_LENGTH"))
                       :element-type <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
>)))
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html"
TARGET="_top"
><TT
CLASS="function"
>WITH-OPEN-STREAM</TT
></A
> (in (<A
HREF="stream-dict.html#make-stream"
><TT
CLASS="function"
>EXT:MAKE-STREAM</TT
></A
> <TT
CLASS="constant"
>:INPUT</TT
> <A
HREF="stream-dict.html#eltype"
><TT
CLASS="constant"
>:ELEMENT-TYPE</TT
></A
> <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
>))
    (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
TARGET="_top"
><TT
CLASS="function"
>READ-SEQUENCE</TT
></A
> buf in))
  buf)
</PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="make-stream"
></A
>21.3.2. Function <A
HREF="stream-dict.html#make-stream"
><TT
CLASS="function"
>EXT:MAKE-STREAM</TT
></A
></H2
><P
ALIGN="justify"
>Function <A
HREF="stream-dict.html#make-stream"
><TT
CLASS="function"
>EXT:MAKE-STREAM</TT
></A
> creates a Lisp stream out of an OS file
 handle: <TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#make-stream"
><TT
CLASS="function"
>EXT:MAKE-STREAM</TT
></A
> <TT
CLASS="replaceable"
><I
>object</I
></TT
> <TT
CLASS="constant"
>:DIRECTION</TT
>
  <A
HREF="stream-dict.html#eltype"
><TT
CLASS="constant"
>:ELEMENT-TYPE</TT
></A
> <A
HREF="stream-dict.html#extfmt"
><TT
CLASS="constant"
>:EXTERNAL-FORMAT</TT
></A
> <A
HREF="stream-dict.html#buffered"
><TT
CLASS="constant"
>:BUFFERED</TT
></A
>)</TT
></P
><P
ALIGN="justify"
><TT
CLASS="replaceable"
><I
>object</I
></TT
> designates an OS handle (a <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165"
TARGET="_top"
>file descriptor</A
>),
 and should be one of the following:
 <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>number</DT
><DD
><P
ALIGN="justify"
>denotes the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165"
TARGET="_top"
>file descriptor</A
> of this value
  </P
></DD
><DT
><TT
CLASS="constant"
>:INPUT</TT
></DT
><DD
><P
ALIGN="justify"
>denotes <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> process standard input
  </P
></DD
><DT
><TT
CLASS="constant"
>:OUTPUT</TT
></DT
><DD
><P
ALIGN="justify"
>denotes <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> process standard output
  </P
></DD
><DT
><TT
CLASS="constant"
>:ERROR</TT
></DT
><DD
><P
ALIGN="justify"
>denotes <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> process standard error
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
></DT
><DD
><P
ALIGN="justify"
>denotes the handle of this stream, which should be
    a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><TT
CLASS="classname"
>FILE-STREAM</TT
></A
> or a <A
HREF="socket.html"
><TT
CLASS="classname"
>SOCKET:SOCKET-STREAM</TT
></A
>
  </P
></DD
></DL
></DIV
></P
><P
ALIGN="justify"
>The handle is duplicated (with <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html"
TARGET="_top"
><TT
CLASS="function"
>dup/dup2</TT
></A
>), so it is safe to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><TT
CLASS="function"
>CLOSE</TT
></A
>
 a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
> returned by <A
HREF="stream-dict.html#make-stream"
><TT
CLASS="function"
>EXT:MAKE-STREAM</TT
></A
>.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="bin-input"
></A
>21.3.3. Binary input, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
>,
  <A
HREF="stream-dict.html#bin-input"
><TT
CLASS="function"
>EXT:READ-INTEGER</TT
></A
> &#38; <A
HREF="stream-dict.html#bin-input"
><TT
CLASS="function"
>EXT:READ-FLOAT</TT
></A
></H2
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#bin-input"
><TT
CLASS="function"
>EXT:READ-INTEGER</TT
></A
> <TT
CLASS="replaceable"
><I
>stream</I
></TT
>
    <TT
CLASS="replaceable"
><I
>element-type</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="stream-dict.html#endianness"
><TT
CLASS="replaceable"
><I
>ENDIANNESS</I
></TT
></A
> <TT
CLASS="replaceable"
><I
>eof-error-p</I
></TT
> <TT
CLASS="replaceable"
><I
>eof-value</I
></TT
>)</TT
>
 reads a multi-byte <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><TT
CLASS="classname"
>INTEGER</TT
></A
> from <TT
CLASS="replaceable"
><I
>stream</I
></TT
>.
 <TT
CLASS="replaceable"
><I
>stream</I
></TT
> should be a stream with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
>.
 <TT
CLASS="replaceable"
><I
>element-type</I
></TT
> should be <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent"
TARGET="_top"
>type equivalent</A
> to <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> <TT
CLASS="replaceable"
><I
>n</I
></TT
>)</TT
>, where
 <TT
CLASS="replaceable"
><I
>n</I
></TT
> is a multiple of 8.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#bin-input"
><TT
CLASS="function"
>EXT:READ-INTEGER</TT
></A
> <TT
CLASS="replaceable"
><I
>stream</I
></TT
>
 <TT
CLASS="replaceable"
><I
>element-type</I
></TT
>)</TT
> is like <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
>
 <TT
CLASS="replaceable"
><I
>stream</I
></TT
>)</TT
> if <TT
CLASS="replaceable"
><I
>stream</I
></TT
>'s <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> were set to
 <TT
CLASS="replaceable"
><I
>element-type</I
></TT
>, except that <TT
CLASS="replaceable"
><I
>stream</I
></TT
>'s <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
TARGET="_top"
><TT
CLASS="function"
>FILE-POSITION</TT
></A
> will increase by
 <SUP
><TT
CLASS="replaceable"
><I
>n</I
></TT
></SUP
>/<SUB
>8</SUB
>
 instead of 1.</P
><P
ALIGN="justify"
>Together with <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>)</TT
>, this function permits mixed
 character/binary input from a stream.</P
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#bin-input"
><TT
CLASS="function"
>EXT:READ-FLOAT</TT
></A
> <TT
CLASS="replaceable"
><I
>stream</I
></TT
>
    <TT
CLASS="replaceable"
><I
>element-type</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="stream-dict.html#endianness"
><TT
CLASS="replaceable"
><I
>ENDIANNESS</I
></TT
></A
> <TT
CLASS="replaceable"
><I
>eof-error-p</I
></TT
> <TT
CLASS="replaceable"
><I
>eof-value</I
></TT
>)</TT
>
 reads a floating-point number in <A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
>
 binary representation from <TT
CLASS="replaceable"
><I
>stream</I
></TT
>.
 <TT
CLASS="replaceable"
><I
>stream</I
></TT
> should be a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
>.
 <TT
CLASS="replaceable"
><I
>element-type</I
></TT
> should be <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent"
TARGET="_top"
>type equivalent</A
> to
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SINGLE-FLOAT</TT
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>DOUBLE-FLOAT</TT
></A
>.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="endianness"
></A
><B
>Endianness. </B
><A
HREF="stream-dict.html#endianness"
><TT
CLASS="replaceable"
><I
>ENDIANNESS</I
></TT
></A
> can be <TT
CLASS="constant"
>:LITTLE</TT
>
 or <TT
CLASS="constant"
>:BIG</TT
>.  The default is
 <TT
CLASS="constant"
>:LITTLE</TT
>, which corresponds to the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
>
 behavior in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="bin-output"
></A
>21.3.4. Binary output, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html"
TARGET="_top"
><TT
CLASS="function"
>WRITE-BYTE</TT
></A
>,
  <A
HREF="stream-dict.html#bin-output"
><TT
CLASS="function"
>EXT:WRITE-INTEGER</TT
></A
> &#38; <A
HREF="stream-dict.html#bin-output"
><TT
CLASS="function"
>EXT:WRITE-FLOAT</TT
></A
></H2
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#bin-output"
><TT
CLASS="function"
>EXT:WRITE-INTEGER</TT
></A
>
    <TT
CLASS="replaceable"
><I
>integer</I
></TT
> <TT
CLASS="replaceable"
><I
>stream</I
></TT
> <TT
CLASS="replaceable"
><I
>element-type</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="stream-dict.html#endianness"
><TT
CLASS="replaceable"
><I
>ENDIANNESS</I
></TT
></A
>)</TT
>
 writes a multi-byte integer to <TT
CLASS="replaceable"
><I
>stream</I
></TT
>.
 <TT
CLASS="replaceable"
><I
>stream</I
></TT
> should be a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
>.
 <TT
CLASS="replaceable"
><I
>element-type</I
></TT
> should be <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent"
TARGET="_top"
>type equivalent</A
> to <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> <TT
CLASS="replaceable"
><I
>n</I
></TT
>)</TT
>, where
 <TT
CLASS="replaceable"
><I
>n</I
></TT
> is a multiple of 8.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#bin-output"
><TT
CLASS="function"
>EXT:WRITE-INTEGER</TT
></A
> <TT
CLASS="replaceable"
><I
>integer</I
></TT
> <TT
CLASS="replaceable"
><I
>stream</I
></TT
>
 <TT
CLASS="replaceable"
><I
>element-type</I
></TT
>)</TT
> is like <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html"
TARGET="_top"
><TT
CLASS="function"
>WRITE-BYTE</TT
></A
>
 <TT
CLASS="replaceable"
><I
>integer</I
></TT
> <TT
CLASS="replaceable"
><I
>stream</I
></TT
>)</TT
> if <TT
CLASS="replaceable"
><I
>stream</I
></TT
>'s <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>
 were set to <TT
CLASS="replaceable"
><I
>element-type</I
></TT
>, except that <TT
CLASS="replaceable"
><I
>stream</I
></TT
>'s <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
TARGET="_top"
><TT
CLASS="function"
>FILE-POSITION</TT
></A
> will
 increase by <SUP
><TT
CLASS="replaceable"
><I
>n</I
></TT
></SUP
>/<SUB
>8</SUB
>
 instead of 1.</P
><P
ALIGN="justify"
>Together with <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>)</TT
>, this function permits mixed
  character/binary output to a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
>.</P
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#bin-output"
><TT
CLASS="function"
>EXT:WRITE-FLOAT</TT
></A
>
    <TT
CLASS="replaceable"
><I
>float</I
></TT
> <TT
CLASS="replaceable"
><I
>stream</I
></TT
>
    <TT
CLASS="replaceable"
><I
>element-type</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="stream-dict.html#endianness"
><TT
CLASS="replaceable"
><I
>ENDIANNESS</I
></TT
></A
>)</TT
>
 writes a floating-point number in <A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
>
 binary representation to <TT
CLASS="replaceable"
><I
>stream</I
></TT
>.
 <TT
CLASS="replaceable"
><I
>stream</I
></TT
> should be a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
>
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
>.
 <TT
CLASS="replaceable"
><I
>element-type</I
></TT
> should be <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent"
TARGET="_top"
>type equivalent</A
> to
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SINGLE-FLOAT</TT
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>DOUBLE-FLOAT</TT
></A
>.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="bulk-io"
></A
>21.3.5. Bulk Input and Output</H2
><DIV
CLASS="formalpara"
><P
><A
NAME="read-seq"
></A
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
TARGET="_top"
><TT
CLASS="function"
>READ-SEQUENCE</TT
></A
>. </B
>In addition to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
TARGET="_top"
><TT
CLASS="function"
>READ-SEQUENCE</TT
></A
>, the following two
 functions are provided:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="rd-by-seq"
></A
><A
HREF="stream-dict.html#rd-by-seq"
><TT
CLASS="function"
>EXT:READ-BYTE-SEQUENCE</TT
></A
>
   performs multiple <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
> operations:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#rd-by-seq"
><TT
CLASS="function"
>EXT:READ-BYTE-SEQUENCE</TT
></A
> <TT
CLASS="replaceable"
><I
>sequence</I
></TT
>
   <TT
CLASS="replaceable"
><I
>stream</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <TT
CLASS="constant"
>:START</TT
> <TT
CLASS="constant"
>:END</TT
> :NO-HANG)</TT
> fills the
   subsequence of <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> specified by <TT
CLASS="constant"
>:START</TT
> and <TT
CLASS="constant"
>:END</TT
> with
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><TT
CLASS="classname"
>INTEGER</TT
></A
>s consecutively read from <TT
CLASS="replaceable"
><I
>stream</I
></TT
>.  It returns the
   index of the first element of <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> that was not updated (=
   <TT
CLASS="replaceable"
><I
>end</I
></TT
> or &#60; <TT
CLASS="replaceable"
><I
>end</I
></TT
> if the <TT
CLASS="replaceable"
><I
>stream</I
></TT
> reached its end).
   When <TT
CLASS="constant"
>:NO-HANG</TT
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, does not block:
   treat input unavailability as <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>.</P
><P
ALIGN="justify"
>This function is especially efficient if <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> is a
   <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><TT
CLASS="classname"
>VECTOR</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8))</TT
> and <TT
CLASS="replaceable"
><I
>stream</I
></TT
> is a <A
HREF="stream-dict.html#open"
>file</A
>/<A
HREF="shell.html#pipe"
>pipe</A
>/<A
HREF="socket.html"
>socket</A
>
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
>.
 </P
></DD
><DT
><A
NAME="rd-ch-seq"
></A
><A
HREF="stream-dict.html#rd-ch-seq"
><TT
CLASS="function"
>EXT:READ-CHAR-SEQUENCE</TT
></A
>
   performs multiple <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><TT
CLASS="function"
>READ-CHAR</TT
></A
> operations:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#rd-ch-seq"
><TT
CLASS="function"
>EXT:READ-CHAR-SEQUENCE</TT
></A
> <TT
CLASS="replaceable"
><I
>sequence</I
></TT
>
  <TT
CLASS="replaceable"
><I
>stream</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <TT
CLASS="constant"
>:START</TT
> <TT
CLASS="constant"
>:END</TT
>)</TT
> fills the
  subsequence of <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> specified by <TT
CLASS="constant"
>:START</TT
> and <TT
CLASS="constant"
>:END</TT
> with
  characters consecutively read from <TT
CLASS="replaceable"
><I
>stream</I
></TT
>.  It returns the index
  of the first element of <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> that was not updated (= <TT
CLASS="replaceable"
><I
>end</I
></TT
>
  or &#60; <TT
CLASS="replaceable"
><I
>end</I
></TT
> if the <TT
CLASS="replaceable"
><I
>stream</I
></TT
> reached its end).</P
><P
ALIGN="justify"
>This function is especially efficient if <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> is a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><TT
CLASS="classname"
>STRING</TT
></A
> and <TT
CLASS="constant"
>:STREAM</TT
> is a <A
HREF="stream-dict.html#open"
>file</A
>/<A
HREF="shell.html#pipe"
>pipe</A
>/<A
HREF="socket.html"
>socket</A
> stream with
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><TT
CLASS="classname"
>CHARACTER</TT
></A
> or an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STRING-STREAM</TT
></A
>.
  </P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="write-seq"
></A
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html"
TARGET="_top"
><TT
CLASS="function"
>WRITE-SEQUENCE</TT
></A
>. </B
>In addition to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html"
TARGET="_top"
><TT
CLASS="function"
>WRITE-SEQUENCE</TT
></A
>, the following two
functions are provided:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="wr-by-seq"
></A
><A
HREF="stream-dict.html#wr-by-seq"
><TT
CLASS="function"
>EXT:WRITE-BYTE-SEQUENCE</TT
></A
>
   performs multiple <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html"
TARGET="_top"
><TT
CLASS="function"
>WRITE-BYTE</TT
></A
> operations:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#wr-by-seq"
><TT
CLASS="function"
>EXT:WRITE-BYTE-SEQUENCE</TT
></A
> <TT
CLASS="replaceable"
><I
>sequence</I
></TT
>
  <TT
CLASS="replaceable"
><I
>stream</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <TT
CLASS="constant"
>:START</TT
> <TT
CLASS="constant"
>:END</TT
>)</TT
> outputs the
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><TT
CLASS="classname"
>INTEGER</TT
></A
>s of the subsequence of <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> specified by
  <TT
CLASS="constant"
>:START</TT
> and <TT
CLASS="constant"
>:END</TT
> to <TT
CLASS="constant"
>:STREAM</TT
>. It returns <TT
CLASS="replaceable"
><I
>sequence</I
></TT
>.</P
><P
ALIGN="justify"
>This function is especially efficient if <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> is a
  <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><TT
CLASS="classname"
>VECTOR</TT
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8))</TT
> and <TT
CLASS="replaceable"
><I
>stream</I
></TT
> is a <A
HREF="stream-dict.html#open"
>file</A
>/<A
HREF="shell.html#pipe"
>pipe</A
>/<A
HREF="socket.html"
>socket</A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
>.
 </P
></DD
><DT
><A
NAME="wr-ch-seq"
></A
><A
HREF="stream-dict.html#wr-ch-seq"
><TT
CLASS="function"
>EXT:WRITE-CHAR-SEQUENCE</TT
></A
>
  performs multiple <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-char.html"
TARGET="_top"
><TT
CLASS="function"
>WRITE-CHAR</TT
></A
> operations:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#wr-ch-seq"
><TT
CLASS="function"
>EXT:WRITE-CHAR-SEQUENCE</TT
></A
> <TT
CLASS="replaceable"
><I
>sequence</I
></TT
>
  <TT
CLASS="replaceable"
><I
>stream</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <TT
CLASS="constant"
>:START</TT
> <TT
CLASS="constant"
>:END</TT
>)</TT
> outputs the
  characters of the subsequence of <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> specified by <TT
CLASS="constant"
>:START</TT
>
  and <TT
CLASS="constant"
>:END</TT
> to <TT
CLASS="constant"
>:STREAM</TT
>.  It returns <TT
CLASS="replaceable"
><I
>sequence</I
></TT
>.</P
><P
ALIGN="justify"
>This function is especially efficient if <TT
CLASS="replaceable"
><I
>sequence</I
></TT
> is a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><TT
CLASS="classname"
>STRING</TT
></A
> and <TT
CLASS="constant"
>:STREAM</TT
> is a <A
HREF="stream-dict.html#open"
>file</A
>/<A
HREF="shell.html#pipe"
>pipe</A
>/<A
HREF="socket.html"
>socket</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
>
  with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><TT
CLASS="classname"
>CHARACTER</TT
></A
>.
  </P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="bulk-io-rationale"
></A
><B
>Rationale. </B
>The rationale for <A
HREF="stream-dict.html#rd-ch-seq"
><TT
CLASS="function"
>EXT:READ-CHAR-SEQUENCE</TT
></A
>, <A
HREF="stream-dict.html#rd-by-seq"
><TT
CLASS="function"
>EXT:READ-BYTE-SEQUENCE</TT
></A
>, <A
HREF="stream-dict.html#wr-ch-seq"
><TT
CLASS="function"
>EXT:WRITE-CHAR-SEQUENCE</TT
></A
> and
 <A
HREF="stream-dict.html#wr-by-seq"
><TT
CLASS="function"
>EXT:WRITE-BYTE-SEQUENCE</TT
></A
> is that some <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
>s support both character and binary
 i/o, and when you read into a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html"
TARGET="_top"
><TT
CLASS="classname"
>SEQUENCE</TT
></A
> that can hold both (e.g.,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><TT
CLASS="classname"
>LIST</TT
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><TT
CLASS="classname"
>SIMPLE-VECTOR</TT
></A
>) you cannot determine which kind of
 input to use.  In such situation <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
TARGET="_top"
><TT
CLASS="function"
>READ-SEQUENCE</TT
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html"
TARGET="_top"
><TT
CLASS="function"
>WRITE-SEQUENCE</TT
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><TT
CLASS="function"
>SIGNAL</TT
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><TT
CLASS="classname"
>ERROR</TT
></A
>, while <A
HREF="stream-dict.html#rd-ch-seq"
><TT
CLASS="function"
>EXT:READ-CHAR-SEQUENCE</TT
></A
>, <A
HREF="stream-dict.html#rd-by-seq"
><TT
CLASS="function"
>EXT:READ-BYTE-SEQUENCE</TT
></A
>, <A
HREF="stream-dict.html#wr-ch-seq"
><TT
CLASS="function"
>EXT:WRITE-CHAR-SEQUENCE</TT
></A
> and
 <A
HREF="stream-dict.html#wr-by-seq"
><TT
CLASS="function"
>EXT:WRITE-BYTE-SEQUENCE</TT
></A
> work just fine.</P
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="non-block-io"
></A
>21.3.6. Non-Blocking Input and Output</H2
><P
ALIGN="justify"
>In addition to the standard functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><TT
CLASS="function"
>LISTEN</TT
></A
> and
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html"
TARGET="_top"
><TT
CLASS="function"
>READ-CHAR-NO-HANG</TT
></A
>, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> provides the following functionality
 facilitating non-blocking input and output, both binary and
 character.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="rcwhp"
></A
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#rcwhp"
><TT
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</TT
></A
>
    <TT
CLASS="replaceable"
><I
>stream</I
></TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="stream-dict.html#rcwhp"
><TT
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</TT
></A
> queries the stream's input status.
  It returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
> if <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><TT
CLASS="function"
>READ-CHAR</TT
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_peek-char.html"
TARGET="_top"
><TT
CLASS="function"
>PEEK-CHAR</TT
></A
> with a
  <TT
CLASS="replaceable"
><I
>peek-type</I
></TT
> of <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
> will return immediately.
  Otherwise it returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>.  (In the latter case the standard
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><TT
CLASS="function"
>LISTEN</TT
></A
> function would return <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>.)</P
><P
ALIGN="justify"
>Note the difference with <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_not.html"
TARGET="_top"
><TT
CLASS="function"
>NOT</TT
></A
>
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><TT
CLASS="function"
>LISTEN</TT
></A
> <TT
CLASS="replaceable"
><I
>stream</I
></TT
>))</TT
>: When the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> is reached, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><TT
CLASS="function"
>LISTEN</TT
></A
>
  returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, whereas <A
HREF="stream-dict.html#rcwhp"
><TT
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</TT
></A
> returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>.</P
><P
ALIGN="justify"
>Note also that <A
HREF="stream-dict.html#rcwhp"
><TT
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</TT
></A
> is not a good way to test for <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>:
  If <A
HREF="stream-dict.html#rcwhp"
><TT
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</TT
></A
> returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>, this does not mean that the <TT
CLASS="replaceable"
><I
>stream</I
></TT
> will
  deliver more characters.  It only means that it is not known at this
  moment whether the <TT
CLASS="replaceable"
><I
>stream</I
></TT
> is already at <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>, or will deliver
  more characters.</P
></DD
><DT
><A
NAME="rbla"
></A
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#rbla"
><TT
CLASS="function"
>EXT:READ-BYTE-LOOKAHEAD</TT
></A
>
    <TT
CLASS="replaceable"
><I
>stream</I
></TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>To be called only if <TT
CLASS="replaceable"
><I
>stream</I
></TT
>'s
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>SIGNED-BYTE</TT
></A
> 8)</TT
>.
   Returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
> if <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
> would return immediately with an
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><TT
CLASS="classname"
>INTEGER</TT
></A
> result.
   Returns <TT
CLASS="constant"
>:EOF</TT
> if the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> is already known to be reached.
   If <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
>'s value is not available immediately, returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>
   instead of waiting.</P
></DD
><DT
><A
NAME="rbwhp"
></A
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#rbwhp"
><TT
CLASS="function"
>EXT:READ-BYTE-WILL-HANG-P</TT
></A
>
    <TT
CLASS="replaceable"
><I
>stream</I
></TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>To be called only if <TT
CLASS="replaceable"
><I
>stream</I
></TT
>'s
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>SIGNED-BYTE</TT
></A
> 8)</TT
>.
   Returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
> if <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
> will return immediately.
   Otherwise it returns true.</P
></DD
><DT
><A
NAME="rbnh"
></A
><TT
CLASS="sexp"
>(<A
HREF="stream-dict.html#rbnh"
><TT
CLASS="function"
>EXT:READ-BYTE-NO-HANG</TT
></A
>
    <TT
CLASS="replaceable"
><I
>stream</I
></TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <TT
CLASS="replaceable"
><I
>eof-error-p</I
></TT
> <TT
CLASS="replaceable"
><I
>eof-value</I
></TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>To be called only if <TT
CLASS="replaceable"
><I
>stream</I
></TT
>'s
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><TT
CLASS="function"
>STREAM-ELEMENT-TYPE</TT
></A
> is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>SIGNED-BYTE</TT
></A
> 8)</TT
>.
   Returns an <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><TT
CLASS="classname"
>INTEGER</TT
></A
> or does <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> handling, like <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
>,
   if that would return immediately.
   If <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><TT
CLASS="function"
>READ-BYTE</TT
></A
>'s value is not available immediately, returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>
   instead of waiting.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="file-pos"
></A
>21.3.7. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
TARGET="_top"
><TT
CLASS="function"
>FILE-POSITION</TT
></A
></H2
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
    platforms only.</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
TARGET="_top"
><TT
CLASS="function"
>FILE-POSITION</TT
></A
> works on any <A
HREF="stream-dict.html#buffered"
><TT
CLASS="constant"
>:BUFFERED</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><TT
CLASS="classname"
>FILE-STREAM</TT
></A
>.
  When a <SPAN
CLASS="keysym"
>#\Newline</SPAN
> is output to (respectively input from) a file stream,
  its file position is increased by 2 since <SPAN
CLASS="keysym"
>#\Newline</SPAN
> is encoded as
  <SPAN
CLASS="keycode"
>CR</SPAN
>/<SPAN
CLASS="keycode"
>LF</SPAN
> in the file.
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="open"
></A
>21.3.8. Function  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><TT
CLASS="function"
>OPEN</TT
></A
></H2
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><TT
CLASS="function"
>OPEN</TT
></A
> cannot handle files of size &#8805; 4 GB.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><TT
CLASS="function"
>OPEN</TT
></A
> accepts an additional keyword <A
HREF="stream-dict.html#buffered"
><TT
CLASS="constant"
>:BUFFERED</TT
></A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>The acceptable values for the arguments to the
   <A
HREF="stream-dict.html#open"
>file</A
>/<A
HREF="shell.html#pipe"
>pipe</A
>/<A
HREF="socket.html"
>socket</A
> functions</B
></P
><DL
><DT
><A
NAME="eltype"
></A
><A
HREF="stream-dict.html#eltype"
><TT
CLASS="constant"
>:ELEMENT-TYPE</TT
></A
></DT
><DD
><P
ALIGN="justify"
>types equivalent to <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><TT
CLASS="classname"
>CHARACTER</TT
></A
> or
    <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> <TT
CLASS="replaceable"
><I
>n</I
></TT
>)</TT
>, <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>SIGNED-BYTE</TT
></A
> <TT
CLASS="replaceable"
><I
>n</I
></TT
>)</TT
>; if the stream is to be
    un<A
HREF="stream-dict.html#buffered"
><TT
CLASS="constant"
>:BUFFERED</TT
></A
>, <TT
CLASS="replaceable"
><I
>n</I
></TT
> must be a multiple of 8.</P
><P
ALIGN="justify"
>If <TT
CLASS="replaceable"
><I
>n</I
></TT
> is not a multiple of 8, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will use the
    specified number of bits for i/o, and write the file length
    (as a number of <TT
CLASS="replaceable"
><I
>n</I
></TT
>-bit bytes) in the preamble.</P
><P
ALIGN="justify"
>This is done to ensure the input/output consistency:
    suppose you open a file with <A
HREF="stream-dict.html#eltype"
><TT
CLASS="constant"
>:ELEMENT-TYPE</TT
></A
> of <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><TT
CLASS="classname"
>UNSIGNED-BYTE</TT
></A
> 3)</TT
> and write 7 bytes
    (i.e., 21 bit) there.
    The underlying OS can do input/output only in whole 8-bit bytes.
    Thus the OS will report the size of the file as 3 (8-bit) bytes.
    Without the preamble <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will have no way to know how many
    3-bit bytes to read from this file - 6, 7 or 8.
   </P
></DD
><DT
><A
NAME="extfmt"
></A
><A
HREF="stream-dict.html#extfmt"
><TT
CLASS="constant"
>:EXTERNAL-FORMAT</TT
></A
></DT
><DD
><P
ALIGN="justify"
><A
HREF="encoding.html"
><TT
CLASS="classname"
>EXT:ENCODING</TT
></A
>s, (constant) <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><TT
CLASS="classname"
>SYMBOL</TT
></A
>s in the
   <A
HREF="encoding.html"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CHARSET"</SPAN
></STRONG
></A
> package, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><TT
CLASS="classname"
>STRING</TT
></A
>s (denoting <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"
TARGET="_top"
><TT
CLASS="function"
>iconv</TT
></A
>-based
   encodings), the symbol <TT
CLASS="constant"
>:DEFAULT</TT
>, and the <A
HREF="encoding.html#newline"
>line terminator</A
> keywords
   <TT
CLASS="constant"
>:UNIX</TT
>, <TT
CLASS="constant"
>:MAC</TT
>, <TT
CLASS="constant"
>:DOS</TT
>.  The default encoding is <A
HREF="encoding.html#def-file-enc"
><TT
CLASS="varname"
>CUSTOM:*DEFAULT-FILE-ENCODING*</TT
></A
>.
    This argument determines how the lisp <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><TT
CLASS="classname"
>CHARACTER</TT
></A
> data is
   converted to/from the 8-bit bytes that the underlying OS uses.
  </P
></DD
><DT
><A
NAME="buffered"
></A
><A
HREF="stream-dict.html#buffered"
><TT
CLASS="constant"
>:BUFFERED</TT
></A
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>, or <TT
CLASS="constant"
>:DEFAULT</TT
>.
    Have <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> manage an internal buffer for input or output (in
    addition to the buffering that might be used by the underlying OS).
    Buffering is a known general technique to significantly speed up i/o.
  <P
></P
><UL
><LI
><P
ALIGN="justify"
>for functions that create <A
HREF="socket.html"
><TT
CLASS="classname"
>SOCKET:SOCKET-STREAM</TT
></A
>s and
    <A
HREF="shell.html#pipe"
>pipes</A
>, <TT
CLASS="constant"
>:DEFAULT</TT
> is equivalent to
    <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>; it you are transmitting a lot of data then using buffering
    will significantly speed up your i/o;</P
></LI
><LI
><P
ALIGN="justify"
>for functions that <A
HREF="stream-dict.html#open"
>open</A
>
    files, <TT
CLASS="constant"
>:DEFAULT</TT
> means that buffered file streams will be returned
    for regular files and (on Unix) block-devices, and unbuffered file
    streams for special files.</P
></LI
></UL
>
  Note that some files, notably those on the <TT
CLASS="filename"
>/proc</TT
>
  filesystem (on <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems), are actually, despite their innocuous
  appearance, special files, so you might need to supply an explicit
  <A
HREF="stream-dict.html#buffered"
><TT
CLASS="constant"
>:BUFFERED</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
> argument for them.  Actually, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> detects that
  the file is a <TT
CLASS="filename"
>/proc</TT
> file, so that one is covered,
  but there are probably more strange beasts there!
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="close"
></A
>21.3.9. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><TT
CLASS="function"
>CLOSE</TT
></A
></H2
><P
ALIGN="justify"
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><TT
CLASS="function"
>CLOSE</TT
></A
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html"
TARGET="_top"
><TT
CLASS="classname"
>GENERIC-FUNCTION</TT
></A
>, see section
 <A
HREF="clos-stream.html#gray"
>"Gray streams"</A
>.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><TT
CLASS="function"
>CLOSE</TT
></A
> ignores its <TT
CLASS="constant"
>:ABORT</TT
> argument.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_get-outpu_tream-string.html"
TARGET="_top"
><TT
CLASS="function"
>GET-OUTPUT-STREAM-STRING</TT
></A
> returns the same value after
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><TT
CLASS="function"
>CLOSE</TT
></A
> as it would before it.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><TT
CLASS="function"
>CLOSE</TT
></A
> on an already closed <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
> does nothing and returns
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>.</P
><P
ALIGN="justify"
>If you do not <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><TT
CLASS="function"
>CLOSE</TT
></A
> your <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
> explicitly, it will be
 closed at <A
HREF="gc.html"
>garbage-collect</A
>ion time automatically.
 This is not recommended though because <A
HREF="gc.html"
>garbage-collect</A
>ion is not deterministic.
 Please use <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html"
TARGET="_top"
><TT
CLASS="function"
>WITH-OPEN-STREAM</TT
></A
> etc.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="open-stream-p"
></A
>21.3.10. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html"
TARGET="_top"
><TT
CLASS="function"
>OPEN-STREAM-P</TT
></A
></H2
><P
ALIGN="justify"
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html"
TARGET="_top"
><TT
CLASS="function"
>OPEN-STREAM-P</TT
></A
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html"
TARGET="_top"
><TT
CLASS="classname"
>GENERIC-FUNCTION</TT
></A
>, see section
 <A
HREF="clos-stream.html#gray"
>"Gray streams"</A
>.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="broadcast-stream"
></A
>21.3.11. Class <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html"
TARGET="_top"
><TT
CLASS="classname"
>BROADCAST-STREAM</TT
></A
></H2
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
TARGET="_top"
><TT
CLASS="function"
>INPUT-STREAM-P</TT
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_interactive-stream-p.html"
TARGET="_top"
><TT
CLASS="function"
>INTERACTIVE-STREAM-P</TT
></A
> return false for
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html"
TARGET="_top"
><TT
CLASS="classname"
>BROADCAST-STREAM</TT
></A
>s.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="stream-buffer"
></A
>21.3.12. Functions
  <TT
CLASS="function"
>EXT:MAKE-BUFFERED-INPUT-STREAM</TT
> and
  <TT
CLASS="function"
>EXT:MAKE-BUFFERED-OUTPUT-STREAM</TT
></H2
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(EXT:MAKE-BUFFERED-OUTPUT-STREAM <TT
CLASS="replaceable"
><I
>function</I
></TT
>)</TT
>
 returns a buffered <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
>.
 <TT
CLASS="replaceable"
><I
>function</I
></TT
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><TT
CLASS="classname"
>FUNCTION</TT
></A
> expecting one argument, a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><TT
CLASS="classname"
>SIMPLE-STRING</TT
></A
>.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-char.html"
TARGET="_top"
><TT
CLASS="function"
>WRITE-CHAR</TT
></A
> collects the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><TT
CLASS="classname"
>CHARACTER</TT
></A
>s in a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><TT
CLASS="classname"
>STRING</TT
></A
>, until a
 newline character is written or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html"
TARGET="_top"
><TT
CLASS="function"
>FORCE-OUTPUT</TT
></A
>/<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html"
TARGET="_top"
><TT
CLASS="function"
>FINISH-OUTPUT</TT
></A
> is called.
 Then <TT
CLASS="replaceable"
><I
>function</I
></TT
> is called with a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><TT
CLASS="classname"
>SIMPLE-STRING</TT
></A
> as argument,
 that contains the characters collected so far.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html"
TARGET="_top"
><TT
CLASS="function"
>CLEAR-OUTPUT</TT
></A
> dicards the characters collected so far.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(EXT:MAKE-BUFFERED-INPUT-STREAM <TT
CLASS="replaceable"
><I
>function</I
></TT
>
  <TT
CLASS="replaceable"
><I
>mode</I
></TT
>)</TT
> returns a buffered <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
>.
 <TT
CLASS="replaceable"
><I
>function</I
></TT
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><TT
CLASS="classname"
>FUNCTION</TT
></A
> of 0 arguments that returns
 either <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
> (stands for <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>) or up to three values
 <TT
CLASS="replaceable"
><I
>string</I
></TT
>, <TT
CLASS="replaceable"
><I
>start</I
></TT
>, <TT
CLASS="replaceable"
><I
>end</I
></TT
>.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><TT
CLASS="function"
>READ-CHAR</TT
></A
> returns the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><TT
CLASS="classname"
>CHARACTER</TT
></A
>s of the current <TT
CLASS="replaceable"
><I
>string</I
></TT
> one
 after another, as delimited by <TT
CLASS="replaceable"
><I
>start</I
></TT
> and <TT
CLASS="replaceable"
><I
>end</I
></TT
>, which default to
 <TT
CLASS="literal"
>0</TT
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, respectively.
 When the <TT
CLASS="replaceable"
><I
>string</I
></TT
> is consumed, <TT
CLASS="replaceable"
><I
>function</I
></TT
> is called again.
 The <TT
CLASS="replaceable"
><I
>string</I
></TT
> returned by <TT
CLASS="replaceable"
><I
>function</I
></TT
> should not be changed,
 otherwise <TT
CLASS="replaceable"
><I
>function</I
></TT
> should copy the <TT
CLASS="replaceable"
><I
>string</I
></TT
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html"
TARGET="_top"
><TT
CLASS="function"
>COPY-SEQ</TT
></A
>
 or <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_subseq.html"
TARGET="_top"
><TT
CLASS="function"
>SUBSEQ</TT
></A
> beforehand.
 <TT
CLASS="replaceable"
><I
>mode</I
></TT
> determines the behavior of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><TT
CLASS="function"
>LISTEN</TT
></A
>
 when the current <TT
CLASS="replaceable"
><I
>string</I
></TT
> buffer is empty:
 <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
></DT
><DD
><P
ALIGN="justify"
>the stream acts like a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><TT
CLASS="classname"
>FILE-STREAM</TT
></A
>,
     i.e. <TT
CLASS="replaceable"
><I
>function</I
></TT
> is called</P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
></DT
><DD
><P
ALIGN="justify"
>the stream acts like an interactive stream without
     <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>, i.e. one can assume that further characters will always
     arrive, without calling <TT
CLASS="replaceable"
><I
>function</I
></TT
></P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><TT
CLASS="classname"
>FUNCTION</TT
></A
></DT
><DD
><P
ALIGN="justify"
>this <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><TT
CLASS="classname"
>FUNCTION</TT
></A
> tells, upon call, if further
     non-empty <TT
CLASS="replaceable"
><I
>string</I
></TT
>s are to be expected.</P
></DD
></DL
></DIV
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html"
TARGET="_top"
><TT
CLASS="function"
>CLEAR-INPUT</TT
></A
> discards the rest of the current <TT
CLASS="replaceable"
><I
>string</I
></TT
>,
 so <TT
CLASS="replaceable"
><I
>function</I
></TT
> will be called upon the next <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><TT
CLASS="function"
>READ-CHAR</TT
></A
> operation.
</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="terminal.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="impnotes-top.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="printer.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Terminal interaction.</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="streams.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Printer
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-22.html"
TARGET="_top"
>[CLHS-22]</A
></TD
></TR
></TABLE
></DIV
><div
class="custom-footer"
><hr
width="100%"><table
width="100%"
><tr
><td
align="left"
><a
href="http://clisp.cons.org"
><img
src="clisp.png"
width="48"
height="48"
alt="[CLISP home]"></a
></td
><td
align="center"
><a
href="http://www.gnu.org"
><img
src="http://www.gnu.org/graphics/gnubanner.jpg"
width="468"
height="60"
alt="[Come and see what GNU creates for YOU]"></a
></td
><td
align="right"
><a
href="http://sourceforge.net"
><img
src="http://sourceforge.net/sflogo.php?group_id=1355&amp;type=2"
width="125"
height="37"
alt="[SourceForge]"></a
></td
></tr
></table
></div
></BODY
></HTML
>