<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>21.3. The Streams Dictionary
   [CLHS-21.2]</title><link rel="stylesheet" href="impnotes.css" type="text/css" /><link rev="made" href="mailto:clisp-list@lists.sourceforge.net" /><meta name="generator" content="DocBook XSL Stylesheets V2005-10-07_10:16_snapshot" /><link rel="start" href="index.html" title="Implementation Notes for GNU CLISP" /><link rel="up" href="streams.html" title="Chapter 21. Streams&#10;   [CLHS-21]" /><link rel="prev" href="terminal.html" title="21.2. Terminal interaction" /><link rel="next" href="printer.html" title="Chapter 22. Printer&#10;   [CLHS-22]" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">21.3. The Streams Dictionary
   [CLHS-21.2]</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="terminal.html">Prev</a> </td><th width="60%" align="center">Chapter 21. Streams
   [CLHS-21]</th><td width="20%" align="right"> <a accesskey="n" href="printer.html">Next</a></td></tr></table><hr /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="stream-dict"></a>21.3. The Streams Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_streams_dictionary.html" target="_top">[CLHS-21.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="stream-dict.html#stream-eltype">21.3.1. Function <code class="function">STREAM-ELEMENT-TYPE</code></a></span></dt><dd><dl><dt><span class="section"><a href="stream-dict.html#bin-stdio">21.3.1.1. Binary input from <code class="varname">*STANDARD-INPUT*</code></a></span></dt></dl></dd><dt><span class="section"><a href="stream-dict.html#make-stream">21.3.2. Function <code class="function">EXT:MAKE-STREAM</code></a></span></dt><dt><span class="section"><a href="stream-dict.html#bin-input">21.3.3. Binary input, <code class="function">READ-BYTE</code>,
  <code class="function">EXT:READ-INTEGER</code> &amp; <code class="function">EXT:READ-FLOAT</code></a></span></dt><dt><span class="section"><a href="stream-dict.html#bin-output">21.3.4. Binary output, <code class="function">WRITE-BYTE</code>,
  <code class="function">EXT:WRITE-INTEGER</code> &amp; <code class="function">EXT:WRITE-FLOAT</code></a></span></dt><dt><span class="section"><a href="stream-dict.html#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="stream-dict.html#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="stream-dict.html#file-pos">21.3.7. Function <code class="function">FILE-POSITION</code></a></span></dt><dt><span class="section"><a href="stream-dict.html#elastic-newline">21.3.8. Avoiding blank lines, <code class="function">EXT:ELASTIC-NEWLINE</code></a></span></dt><dt><span class="section"><a href="stream-dict.html#open">21.3.9. Function <code class="function">OPEN</code></a></span></dt><dt><span class="section"><a href="stream-dict.html#close">21.3.10. Function <code class="function">CLOSE</code></a></span></dt><dt><span class="section"><a href="stream-dict.html#open-stream-p">21.3.11. Function <code class="function">OPEN-STREAM-P</code></a></span></dt><dt><span class="section"><a href="stream-dict.html#broadcast-stream">21.3.12. Class <code class="classname">BROADCAST-STREAM</code></a></span></dt><dt><span class="section"><a href="stream-dict.html#stream-buffer">21.3.13. Functions
  <code class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</code>
    and
  <code class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</code>
   </a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="stream-eltype"></a>21.3.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="stream-dict.html#bin-stdio">21.3.1.1. Binary input from <code class="varname">*STANDARD-INPUT*</code></a></span></dt></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able. The <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> of
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s created by the functions <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a>, <a href="shell.html#pipe" title="31.7.2. Pipes"><code class="function">EXT:MAKE-PIPE-INPUT-STREAM</code></a>
  <a href="shell.html#pipe" title="31.7.2. Pipes"><code class="function">EXT:MAKE-PIPE-OUTPUT-STREAM</code></a>, <a href="shell.html#pipe" title="31.7.2. Pipes"><code class="function">EXT:MAKE-PIPE-IO-STREAM</code></a>, <a href="socket.html#so-accept"><code class="function">SOCKET:SOCKET-ACCEPT</code></a>, <a href="socket.html#so-connect"><code class="function">SOCKET:SOCKET-CONNECT</code></a>
  can be modified, if the old and the new <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>s are either
 </p><div class="itemizedlist"><ul type="disc"><li>both equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> or
    <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>; or</li><li>both equivalent to <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>, with the
    same <em class="replaceable"><code>n</code></em>.</li></ul></div><p>Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> and <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>)</code> are <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>s, see
 <a href="gray.html" title="29.2. Gray streams">Section 29.2, “Gray streams”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="bin-stdio"></a>21.3.1.1. Binary input from <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-INPUT*</code></a></h4></div></div></div><p>Note that you cannot change <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> for some
 built-in streams, such as <a href="terminal.html" title="21.2. Terminal interaction">terminal streams</a>,
 which is normally the value of <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a>.
 Since <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-INPUT*</code></a> normally is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><code class="classname">SYNONYM-STREAM</code></a> pointing
 to <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a>, you cannot use <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> in the it.</p><p>Since <a href="http://hoohoo.ncsa.uiuc.edu/cgi/" target="_top">CGI</a>
 (Common Gateway Interface) provides the form data for
 <span><strong class="command">METHOD="POST"</strong></span> on the stdin,
 and the server will <span class="strong"><strong>not</strong></span> send you an <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> on the end of the data,
 you will need to use
 <code class="code">(<a href="getenv.html" title="31.8. Operating System Environment"><code class="function">EXT:GETENV</code></a> <code class="envar">"CONTENT_LENGTH"</code>)</code>
 to determine how much data you should read from stdin.
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will detect that stdin is not a terminal and create a regular
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a> which can be passed to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>)</code>.
 To test this functionality interactively,
 you will need to open the standard input in the binary mode:
</p><pre class="programlisting">
(let ((buf (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><code class="function">MAKE-ARRAY</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-integer.html" target="_top"><code class="function">PARSE-INTEGER</code></a> (<a href="getenv.html" title="31.8. Operating System Environment"><code class="function">EXT:GETENV</code></a> "CONTENT_LENGTH"))
                       :element-type '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>)))
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a> (in (<a href="stream-dict.html#make-stream" title="21.3.2. Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a> <code class="constant">:INPUT</code> <a href="stream-dict.html#eltype"><code class="constant">:ELEMENT-TYPE</code></a> '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>))
    (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><code class="function">READ-SEQUENCE</code></a> buf in))
  buf)
</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-stream"></a>21.3.2. Function <a href="stream-dict.html#make-stream" title="21.3.2. Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a></h3></div></div></div><p>Function <a href="stream-dict.html#make-stream" title="21.3.2. Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a> creates a Lisp stream out of an OS <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>:
 <code class="code">(<a href="stream-dict.html#make-stream" title="21.3.2. Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a> <em class="replaceable"><code>object</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:DIRECTION</code>
  <a href="stream-dict.html#eltype"><code class="constant">:ELEMENT-TYPE</code></a> <a href="stream-dict.html#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <a href="stream-dict.html#buffered"><code class="constant">:BUFFERED</code></a>)</code></p><p><em class="replaceable"><code>object</code></em> designates an OS handle (a <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>),
 and should be one of the following: </p><div class="variablelist"><dl><dt><span class="term">number</span></dt><dd>denotes the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a> of this value
  </dd><dt><span class="term"><code class="constant">:INPUT</code></span></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process standard input
  </dd><dt><span class="term"><code class="constant">:OUTPUT</code></span></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process standard output
  </dd><dt><span class="term"><code class="constant">:ERROR</code></span></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process standard error
  </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a></span></dt><dd>denotes the handle of this stream, which should be
     a <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a> or a <a href="socket.html" title="31.5. Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a></dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="make-stream-warn-buffering"></a>Beware of buffering!</h3><p>When there are several Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s backed by the same OS
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>, the behavior may be highly confusing when some of the
  Lisp streams are <a href="stream-dict.html#buffered"><code class="constant">:BUFFERED</code></a>.  Use <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FORCE-OUTPUT</code></a> for <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s,
  and <a href="stream-dict.html#bulk-io" title="21.3.5. Bulk Input and Output">bulk input</a> for <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s.</p></div><p>The handle is duplicated (with <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html"><code class="function">dup</code></a>),
 so it is safe to <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> returned by <a href="stream-dict.html#make-stream" title="21.3.2. Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bin-input"></a>21.3.3. Binary input, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>,
  <a href="stream-dict.html#bin-input" title="21.3.3. Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-INTEGER</code></a> &amp; <a href="stream-dict.html#bin-input" title="21.3.3. Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-FLOAT</code></a></h3></div></div></div><p>The function <code class="code">(<a href="stream-dict.html#bin-input" title="21.3.3. Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-INTEGER</code></a> <em class="replaceable"><code>stream</code></em>
    <em class="replaceable"><code>element-type</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="stream-dict.html#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a> <em class="replaceable"><code>eof-error-p</code></em> <em class="replaceable"><code>eof-value</code></em>)</code>
 reads a multi-byte <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> from <em class="replaceable"><code>stream</code></em>, which should be a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.
 <em class="replaceable"><code>element-type</code></em> should be <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>,
 where <em class="replaceable"><code>n</code></em> is a multiple of 8.</p><p><code class="code">(<a href="stream-dict.html#bin-input" title="21.3.3. Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-INTEGER</code></a> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em>)</code> is like
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> <em class="replaceable"><code>stream</code></em>)</code> if <em class="replaceable"><code>stream</code></em>'s
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> were set to <em class="replaceable"><code>element-type</code></em>,
 except that <em class="replaceable"><code>stream</code></em>'s <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><code class="function">FILE-POSITION</code></a> will increase by
 <sup><em class="replaceable"><code>n</code></em></sup>/<sub>8</sub>
 instead of 1.</p><p>Together with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>)</code>, this
 function permits mixed character/binary input from a stream.</p><p>The function <code class="code">(<a href="stream-dict.html#bin-input" title="21.3.3. Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-FLOAT</code></a> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="stream-dict.html#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a> <em class="replaceable"><code>eof-error-p</code></em> <em class="replaceable"><code>eof-value</code></em>)</code> reads a
 floating-point number in <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a> binary representation from
 <em class="replaceable"><code>stream</code></em>, which should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.  <em class="replaceable"><code>element-type</code></em> should be
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a>.</p><p><a id="endianness"></a><b>Endianness. </b><strong class="first"><em class="firstterm"><a href="stream-dict.html#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a>
   <a id="endianness-i" class="indexterm"></a></em></strong>
  can be <code class="constant">:LITTLE</code> or <code class="constant">:BIG</code>.
  The default is <code class="constant">:LITTLE</code>, which corresponds
  to the <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> behavior in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bin-output"></a>21.3.4. Binary output, <a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><code class="function">WRITE-BYTE</code></a>,
  <a href="stream-dict.html#bin-output" title="21.3.4. Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-INTEGER</code></a> &amp; <a href="stream-dict.html#bin-output" title="21.3.4. Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-FLOAT</code></a></h3></div></div></div><p>The function <code class="code">(<a href="stream-dict.html#bin-output" title="21.3.4. Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-INTEGER</code></a> <em class="replaceable"><code>integer</code></em> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="stream-dict.html#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a>)</code> writes a multi-byte <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> to
 <em class="replaceable"><code>stream</code></em>, which should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.  <em class="replaceable"><code>element-type</code></em> should be
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>, where <em class="replaceable"><code>n</code></em> is a multiple of 8.</p><p><code class="code">(<a href="stream-dict.html#bin-output" title="21.3.4. Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-INTEGER</code></a> <em class="replaceable"><code>integer</code></em> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em>)</code> is
 like <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><code class="function">WRITE-BYTE</code></a> <em class="replaceable"><code>integer</code></em> <em class="replaceable"><code>stream</code></em>)</code> if <em class="replaceable"><code>stream</code></em>'s
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> were set to <em class="replaceable"><code>element-type</code></em>, except that <em class="replaceable"><code>stream</code></em>'s
 <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><code class="function">FILE-POSITION</code></a> will increase by
 <sup><em class="replaceable"><code>n</code></em></sup>/<sub>8</sub>
 instead of 1.</p><p>Together with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>)</code>, this
  function permits mixed character/binary output to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>.</p><p>The function <code class="code">(<a href="stream-dict.html#bin-output" title="21.3.4. Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-FLOAT</code></a> <em class="replaceable"><code>float</code></em>
  <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="stream-dict.html#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a>)</code> writes a
 floating-point number in <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a> binary representation to
 <em class="replaceable"><code>stream</code></em>, which should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>
 <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.  <em class="replaceable"><code>element-type</code></em> should be
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bulk-io"></a>21.3.5. Bulk Input and Output</h3></div></div></div><p><a id="read-seq"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><code class="function">READ-SEQUENCE</code></a>. </b>In addition to <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><code class="function">READ-SEQUENCE</code></a>, the following two
 functions are provided:
</p><div class="variablelist"><dl><dt><a id="rd-by-seq"></a><span class="term"><a href="stream-dict.html#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> operations:</span></dt><dd><p><code class="code">(<a href="stream-dict.html#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a> <em class="replaceable"><code>sequence</code></em>
   <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:START</code> <code class="constant">:END</code> :NO-HANG :INTERACTIVE)</code>
   fills the subsequence of <em class="replaceable"><code>sequence</code></em> specified by <code class="constant">:START</code> and <code class="constant">:END</code>
   with <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s consecutively read from <em class="replaceable"><code>stream</code></em>.  It returns the
   index of the first element of <em class="replaceable"><code>sequence</code></em> that was not updated (=
   <em class="replaceable"><code>end</code></em> or &lt; <em class="replaceable"><code>end</code></em> if the <em class="replaceable"><code>stream</code></em> reached its end).
   When <em class="replaceable"><code>no-hang</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, it does not block: it treats input
   unavailability as <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>. When <em class="replaceable"><code>no-hang</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and <em class="replaceable"><code>interactive</code></em> is
   non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, it can block for reading the first byte but does not block
   for any further bytes.</p><p>This function is especially efficient if <em class="replaceable"><code>sequence</code></em> is a
   <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span> and <em class="replaceable"><code>stream</code></em> is a <a href="stream-dict.html#open" title="21.3.9. Function OPEN">file</a>/<a href="shell.html#pipe" title="31.7.2. Pipes">pipe</a>/<a href="socket.html" title="31.5. Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>
   with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.
 </p></dd><dt><a id="rd-ch-seq"></a><span class="term"><a href="stream-dict.html#rd-ch-seq"><code class="function">EXT:READ-CHAR-SEQUENCE</code></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> operations:</span></dt><dd><p><code class="code">(<a href="stream-dict.html#rd-ch-seq"><code class="function">EXT:READ-CHAR-SEQUENCE</code></a> <em class="replaceable"><code>sequence</code></em> <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <code class="constant">:START</code> <code class="constant">:END</code>)</code> fills the subsequence of <em class="replaceable"><code>sequence</code></em>
   specified by <code class="constant">:START</code> and <code class="constant">:END</code> with characters consecutively read
   from <em class="replaceable"><code>stream</code></em>.  It returns the index of the first element of
   <em class="replaceable"><code>sequence</code></em> that was not updated (= <em class="replaceable"><code>end</code></em> or &lt; <em class="replaceable"><code>end</code></em> if the
   <em class="replaceable"><code>stream</code></em> reached its end).</p><p>This function is especially efficient if <em class="replaceable"><code>sequence</code></em> is a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> and <em class="replaceable"><code>stream</code></em> is a <a href="stream-dict.html#open" title="21.3.9. Function OPEN">file</a>/<a href="shell.html#pipe" title="31.7.2. Pipes">pipe</a>/<a href="socket.html" title="31.5. Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> or an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><code class="classname">STRING-STREAM</code></a>.
 </p></dd></dl></div><p><a id="write-seq"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><code class="function">WRITE-SEQUENCE</code></a>. </b>In addition to <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><code class="function">WRITE-SEQUENCE</code></a>, the following two
functions are provided:
</p><div class="variablelist"><dl><dt><a id="wr-by-seq"></a><span class="term"><a href="stream-dict.html#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><code class="function">WRITE-BYTE</code></a> operations:</span></dt><dd><p><code class="code">(<a href="stream-dict.html#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a> <em class="replaceable"><code>sequence</code></em> <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
  <code class="constant">:START</code> <code class="constant">:END</code> :NO-HANG)</code> outputs the <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s of the
  subsequence of <em class="replaceable"><code>sequence</code></em> specified by <code class="constant">:START</code> and <code class="constant">:END</code> to
  <em class="replaceable"><code>stream</code></em>.  When <code class="constant">:NO-HANG</code> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, does not
  block.  Returns two values: <em class="replaceable"><code>sequence</code></em> and the index of the first
  byte that was not output.</p><p>This function is especially efficient if <em class="replaceable"><code>sequence</code></em> is a
  <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span> and <em class="replaceable"><code>stream</code></em> is a <a href="stream-dict.html#open" title="21.3.9. Function OPEN">file</a>/<a href="shell.html#pipe" title="31.7.2. Pipes">pipe</a>/<a href="socket.html" title="31.5. Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
  <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.</p></dd><dt><a id="wr-ch-seq"></a><span class="term"><a href="stream-dict.html#wr-ch-seq"><code class="function">EXT:WRITE-CHAR-SEQUENCE</code></a>
  performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><code class="function">WRITE-CHAR</code></a> operations:</span></dt><dd><p><code class="code">(<a href="stream-dict.html#wr-ch-seq"><code class="function">EXT:WRITE-CHAR-SEQUENCE</code></a> <em class="replaceable"><code>sequence</code></em> <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
  <code class="constant">:START</code> <code class="constant">:END</code>)</code> outputs the characters of the subsequence of
  <em class="replaceable"><code>sequence</code></em> specified by <code class="constant">:START</code> and <code class="constant">:END</code> to <em class="replaceable"><code>stream</code></em>.
  Returns the <em class="replaceable"><code>sequence</code></em> argument.</p><p>This function is especially efficient if <em class="replaceable"><code>sequence</code></em> is a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> and <em class="replaceable"><code>stream</code></em> is a <a href="stream-dict.html#open" title="21.3.9. Function OPEN">file</a>/<a href="shell.html#pipe" title="31.7.2. Pipes">pipe</a>/<a href="socket.html" title="31.5. Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
  <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.</p></dd></dl></div><p><a id="bulk-io-rationale"></a><b>Rationale. </b>The rationale for <a href="stream-dict.html#rd-ch-seq"><code class="function">EXT:READ-CHAR-SEQUENCE</code></a>, <a href="stream-dict.html#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a>, <a href="stream-dict.html#wr-ch-seq"><code class="function">EXT:WRITE-CHAR-SEQUENCE</code></a> and
 <a href="stream-dict.html#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a> is that some <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s support both character and binary
 i/o, and when you read into a <a href="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html" target="_top"><code class="classname">SEQUENCE</code></a> that can hold both (e.g.,
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a>) you cannot determine which kind of
 input to use.  In such situation <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><code class="function">READ-SEQUENCE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><code class="function">WRITE-SEQUENCE</code></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>, while <a href="stream-dict.html#rd-ch-seq"><code class="function">EXT:READ-CHAR-SEQUENCE</code></a>, <a href="stream-dict.html#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a>, <a href="stream-dict.html#wr-ch-seq"><code class="function">EXT:WRITE-CHAR-SEQUENCE</code></a> and
 <a href="stream-dict.html#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a> work just fine.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="non-block-io"></a>21.3.6. Non-Blocking Input and Output</h3></div></div></div><p>In addition to the standard functions <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><code class="function">READ-CHAR-NO-HANG</code></a>, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> provides the following functionality
 facilitating non-blocking input and output, both binary and
 character.</p><div class="variablelist"><dl><dt><a id="rcwhp"></a><span class="term"><code class="code">(<a href="stream-dict.html#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p><a href="stream-dict.html#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> queries the stream's input status.
  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_peek-char.html" target="_top"><code class="function">PEEK-CHAR</code></a> with a
  <em class="replaceable"><code>peek-type</code></em> of <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> will return immediately.
  Otherwise it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.  (In the latter case the standard
  <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a> function would return <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.)</p><p>Note the difference with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_not.html" target="_top"><code class="function">NOT</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a>
  <em class="replaceable"><code>stream</code></em>))</code>: When the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is reached, <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a> returns
  <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, whereas <a href="stream-dict.html#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><p>Note also that <a href="stream-dict.html#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> is not a good way to test for <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>:
  If <a href="stream-dict.html#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, this does not mean that the <em class="replaceable"><code>stream</code></em> will
  deliver more characters.  It only means that it is not known at this
  moment whether the <em class="replaceable"><code>stream</code></em> is already at <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>, or will deliver
  more characters.</p></dd><dt><a id="rbla"></a><span class="term"><code class="code">(<a href="stream-dict.html#rbla"><code class="function">EXT:READ-BYTE-LOOKAHEAD</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>To be called only if <em class="replaceable"><code>stream</code></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> would return immediately with an
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> result.
   Returns <code class="constant">:EOF</code> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is already known to be reached.
   If <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>'s value is not available immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
   instead of waiting.</dd><dt><a id="rbwhp"></a><span class="term"><code class="code">(<a href="stream-dict.html#rbwhp"><code class="function">EXT:READ-BYTE-WILL-HANG-P</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>To be called only if <em class="replaceable"><code>stream</code></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> will return immediately.
   Otherwise it returns true.</dd><dt><a id="rbnh"></a><span class="term"><code class="code">(<a href="stream-dict.html#rbnh"><code class="function">EXT:READ-BYTE-NO-HANG</code></a> <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
    <em class="replaceable"><code>eof-error-p</code></em> <em class="replaceable"><code>eof-value</code></em>)</code></span></dt><dd>To be called only if <em class="replaceable"><code>stream</code></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>.
   Returns an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or does <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> handling, like <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>,
   if that would return immediately.
   If <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>'s value is not available immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
   instead of waiting.</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="file-pos"></a>21.3.7. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><code class="function">FILE-POSITION</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><code class="function">FILE-POSITION</code></a> works on any <a href="stream-dict.html#buffered"><code class="constant">:BUFFERED</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>.</p>
<!--#if defined(WIN32) || (defined(UNIX) && (O_BINARY!= 0))-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd>When a <span class="keysym">#\Newline</span> is output to (respectively input from)
  a file stream, its file position is increased by 2 since <span class="keysym">#\Newline</span> is
  encoded as <span class="keycode">CR</span>/<span class="keycode">LF</span> in the file.
</dd></dl></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="elastic-newline"></a>21.3.8. Avoiding blank lines, <a href="stream-dict.html#elastic-newline" title="21.3.8. Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a></h3></div></div></div><p>The function <code class="code">(<a href="stream-dict.html#elastic-newline" title="21.3.8. Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a> [<em class="replaceable"><code>stream</code></em>])</code> is like
 <a href="http://www.lisp.org/HyperSpec/Body/fun_terpricm_fresh-line.html" target="_top"><code class="function">FRESH-LINE</code></a> but the other way around: It outputs a conditional newline
 on <em class="replaceable"><code>stream</code></em>, which is canceled if the <span class="emphasis"><em>next</em></span>
 output on <em class="replaceable"><code>stream</code></em> happens to be a newline.  More precisely, it
 causes a newline to be output right before the next character is
 written on <em class="replaceable"><code>stream</code></em>, if this character is not a newline.
 The newline is also output if the next operation on the stream is
 <a href="http://www.lisp.org/HyperSpec/Body/fun_terpricm_fresh-line.html" target="_top"><code class="function">FRESH-LINE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FINISH-OUTPUT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FORCE-OUTPUT</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a>.</p><p>The functionality of <a href="stream-dict.html#elastic-newline" title="21.3.8. Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a> is also available through
 the <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> directive <a href="print-formatted.html#format-dot">~.</a>.</p><p>A technique for avoiding unnecessary blank lines in output is to
 begin each chunk of output with a call to <a href="http://www.lisp.org/HyperSpec/Body/fun_terpricm_fresh-line.html" target="_top"><code class="function">FRESH-LINE</code></a> and to terminate it
 with a call to <a href="stream-dict.html#elastic-newline" title="21.3.8. Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a>.</p><p>See also
 <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/Newline-Convention.txt"><code class="filename">doc/Newline-Convention.txt</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="open"></a>21.3.9. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a> accepts an additional keyword <a href="stream-dict.html#buffered"><code class="constant">:BUFFERED</code></a>.</p><div class="variablelist"><p class="title"><b>The acceptable values for the arguments to the
   <a href="stream-dict.html#open" title="21.3.9. Function OPEN">file</a>/<a href="shell.html#pipe" title="31.7.2. Pipes">pipe</a>/<a href="socket.html" title="31.5. Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> functions</b></p><dl><dt><a id="eltype"></a><span class="term"><a href="stream-dict.html#eltype"><code class="constant">:ELEMENT-TYPE</code></a></span></dt><dd><p>types equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> or
    <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>; if the stream is to be
    un<a href="stream-dict.html#buffered"><code class="constant">:BUFFERED</code></a>, <em class="replaceable"><code>n</code></em> must be a multiple of 8.</p><p>If <em class="replaceable"><code>n</code></em> is not a multiple of 8, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will use the
    specified number of bits for i/o, and write the file length
    (as a number of <em class="replaceable"><code>n</code></em>-bit bytes) in the preamble.</p><p>This is done to ensure the input/output consistency:
    suppose you open a file with <a href="stream-dict.html#eltype"><code class="constant">:ELEMENT-TYPE</code></a> of <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 3)</code></span> and write 7 bytes
    (i.e., 21 bit) there.
    The underlying OS can do input/output only in whole 8-bit bytes.
    Thus the OS will report the size of the file as 3 (8-bit) bytes.
    Without the preamble <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will have no way to know how many
    3-bit bytes to read from this file - 6, 7 or 8.
   </p></dd><dt><a id="extfmt"></a><span class="term"><a href="stream-dict.html#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a></span></dt><dd><a href="encoding.html" title="30.5. Encodings"><code class="classname">EXT:ENCODING</code></a>s, (constant) <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>s in the
    <a href="encoding.html" title="30.5. Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a> package, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s (denoting <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"><code class="function">iconv</code></a>-based encodings),
    the symbol <code class="constant">:DEFAULT</code>, and the <a href="encoding.html#newline" title="30.5.3. Line Terminators">line terminator</a> keywords
    <code class="constant">:UNIX</code>, <code class="constant">:MAC</code>, <code class="constant">:DOS</code>.  The default encoding is <a href="encoding.html#def-file-enc" class="olink"><code class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</code></a>.
    This argument determines how the lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> data is
    converted to/from the 8-bit bytes that the underlying OS uses.
  </dd><dt><a id="buffered"></a><span class="term"><a href="stream-dict.html#buffered"><code class="constant">:BUFFERED</code></a></span></dt><dd><p><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, or <code class="constant">:DEFAULT</code>.
    Have <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> manage an internal buffer for input or output (in
    addition to the buffering that might be used by the underlying OS).
    Buffering is a known general technique to significantly speed up i/o.
  </p><div class="itemizedlist"><ul type="disc"><li>for functions that create <a href="socket.html" title="31.5. Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>s and
    <a href="shell.html#pipe" title="31.7.2. Pipes">pipes</a>, <code class="constant">:DEFAULT</code> is equivalent to
    <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> on the input side and to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> on the output side; it you are
    transmitting a lot of data then using buffering
    will significantly speed up your i/o;</li><li>for functions that <a href="stream-dict.html#open" title="21.3.9. Function OPEN">open</a>
    files, <code class="constant">:DEFAULT</code> means that buffered file streams will be returned
    for regular files and (on <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>) block-devices, and unbuffered file
    streams for special files.</li></ul></div><p>
  Note that some files, notably those on the <code class="filename">/proc</code>
  filesystem (on <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> systems), are actually, despite their innocuous
  appearance, special files, so you might need to supply an explicit
  <a href="stream-dict.html#buffered"><code class="constant">:BUFFERED</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> argument for them.  Actually, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> detects that
  the file is a <code class="filename">/proc</code> file, so that one is covered,
  but there are probably more strange beasts there!
</p></dd></dl></div><p>When an already opened file is opened again, a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed, unless both the existing and the new <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s are read-only
 (i.e., <code class="constant">:DIRECTION</code> is <code class="constant">:INPUT</code> or <code class="constant">:INPUT-IMMUTABLE</code>).
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="close"></a>21.3.10. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>, see
 <a href="gray.html" title="29.2. Gray streams">Section 29.2, “Gray streams”</a>.</p><p>When the <code class="constant">:ABORT</code> argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> will not
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> even when the underlying OS call fails.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_get-outpu_tream-string.html" target="_top"><code class="function">GET-OUTPUT-STREAM-STRING</code></a> returns the same value after
 <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> as it would before it.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> on an already closed <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> does nothing and returns
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</p><p>If you do not <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> your <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> explicitly, it will be
 closed at <a href="gc.html" title="Chapter 34. Overview of CLISP's Garbage Collection">garbage-collect</a>ion time automatically.
 This is not recommended though because <a href="gc.html" title="Chapter 34. Overview of CLISP's Garbage Collection">garbage-collect</a>ion is not deterministic.
 Please use <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a> etc.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="open-stream-p"></a>21.3.11. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><code class="function">OPEN-STREAM-P</code></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><code class="function">OPEN-STREAM-P</code></a> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>, see
 <a href="gray.html" title="29.2. Gray streams">Section 29.2, “Gray streams”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="broadcast-stream"></a>21.3.12. Class <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><code class="classname">BROADCAST-STREAM</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><code class="function">INPUT-STREAM-P</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_interactive-stream-p.html" target="_top"><code class="function">INTERACTIVE-STREAM-P</code></a> return false for
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><code class="classname">BROADCAST-STREAM</code></a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="stream-buffer"></a>21.3.13. Functions
  <strong class="first"><em class="firstterm"><code class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</code>
   <a id="stream-buffer-i" class="indexterm"></a></em></strong> and
  <strong class="first"><em class="firstterm"><code class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</code>
   <a id="stream-buffer-o" class="indexterm"></a></em></strong></h3></div></div></div><p><b><code class="code">(EXT:MAKE-BUFFERED-OUTPUT-STREAM
   <em class="replaceable"><code>function</code></em>)</code>. </b>Returns a buffered <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>.
 <em class="replaceable"><code>function</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> expecting one argument, a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a>.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><code class="function">WRITE-CHAR</code></a> collects the <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s in a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, until a
 newline character is written or <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FORCE-OUTPUT</code></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FINISH-OUTPUT</code></a> is called.
 Then <em class="replaceable"><code>function</code></em> is called with a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a> as argument,
 that contains the characters collected so far.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">CLEAR-OUTPUT</code></a> discards the characters collected so far.</p><p><b><code class="code">(EXT:MAKE-BUFFERED-INPUT-STREAM <em class="replaceable"><code>function</code></em>
   <em class="replaceable"><code>mode</code></em>)</code>. </b>Returns a buffered <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>.
 <em class="replaceable"><code>function</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> of 0 arguments that returns
 either <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (stands for <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>) or up to three values
 <em class="replaceable"><code>string</code></em>, <em class="replaceable"><code>start</code></em>, <em class="replaceable"><code>end</code></em>.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> returns the <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s of the current <em class="replaceable"><code>string</code></em> one
 after another, as delimited by <em class="replaceable"><code>start</code></em> and <em class="replaceable"><code>end</code></em>, which default to
 <code class="literal">0</code> and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, respectively.
 When the <em class="replaceable"><code>string</code></em> is consumed, <em class="replaceable"><code>function</code></em> is called again.
 The <em class="replaceable"><code>string</code></em> returned by <em class="replaceable"><code>function</code></em> should not be changed by the user.
 <em class="replaceable"><code>function</code></em> should copy the <em class="replaceable"><code>string</code></em> with <a href="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html" target="_top"><code class="function">COPY-SEQ</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/acc_subseq.html" target="_top"><code class="function">SUBSEQ</code></a> before
 returning if the original <em class="replaceable"><code>string</code></em> is to be modified.
 <em class="replaceable"><code>mode</code></em> determines the behavior of <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a>
 when the current <em class="replaceable"><code>string</code></em> buffer is empty:
 </p><div class="variablelist"><dl><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></span></dt><dd>the stream acts like a <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>,
     i.e. <em class="replaceable"><code>function</code></em> is called</dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></span></dt><dd>the stream acts like an interactive stream without
     <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>, i.e. one can assume that further characters will always
     arrive, without calling <em class="replaceable"><code>function</code></em></dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a></span></dt><dd>this <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> tells, upon call, if further
     non-empty <em class="replaceable"><code>string</code></em>s are to be expected.</dd></dl></div><p>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html" target="_top"><code class="function">CLEAR-INPUT</code></a> discards the rest of the current <em class="replaceable"><code>string</code></em>,
 so <em class="replaceable"><code>function</code></em> will be called upon the next <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> operation.
</p></div></div><div class="bookinfo"><hr width="100%" /><table width="100%" summary="impnotes meta info"><th><td align="left">These notes document <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> version 2.37</td><td align="right">Last modified: 2006-01-02</td></th></table></div><div class="custom-footer"><hr width="100%" /><table width="100%"><tr><td align="left"><a href="http://clisp.cons.org"><img src="clisp.png" width="48" height="48" alt="[CLISP home]" /></a></td><td align="center"><a href="http://sourceforge.net/donate/index.php?group_id=1355"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="[Support This Project]" /></a></td><td align="right"><a href="http://sourceforge.net"><img width="125" height="37" alt="[SourceForge]" src="http://sflogo.sourceforge.net/sflogo.php?group_id=1355&amp;type=2&amp;page=stream-dict" /></a></td></tr></table></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="terminal.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="streams.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="printer.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">21.2. Terminal interaction </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 22. Printer
   [CLHS-22]</td></tr></table></div></body></html>
