<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>25.1. Debugging Utilities
   [CLHS-25.1.2]</title><link rel="stylesheet" href="impnotes.css" type="text/css" /><link rev="made" href="mailto:clisp-list@sf.net" /><meta name="generator" content="DocBook XSL Stylesheets V1.65.1" /><link rel="home" href="index.html" title="Implementation Notes for GNU CLISP." /><link rel="up" href="environment.html" title="Chapter 25. Environment&#10;   [CLHS-25]" /><link rel="previous" href="environment.html" title="Chapter 25. Environment&#10;   [CLHS-25]" /><link rel="next" href="environment-dict.html" title="25.2. The Environment Dictionary&#10;   [CLHS-25.2]" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">25.1. Debugging Utilities
   [CLHS-25.1.2]</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="environment.html">Prev</a> </td><th width="60%" align="center">Chapter 25. Environment
   [CLHS-25]</th><td width="20%" align="right"> <a accesskey="n" href="environment-dict.html">Next</a></td></tr></table><hr /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="debugger"></a>25.1. Debugging Utilities
   <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-2.html" target="_top">[CLHS-25.1.2]</a></h2></div></div><div></div></div><p>The debugger may be invoked through the functions
 <a href="http://www.lisp.org/HyperSpec/Body/fun_invoke-debugger.html" target="_top"><tt class="function">INVOKE-DEBUGGER</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><tt class="function">BREAK</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><tt class="function">ERROR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_cerror.html" target="_top"><tt class="function">CERROR</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><tt class="function">WARN</tt></a>.
 The stepper is invoked through the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>.
 Debugger and stepper execute subordinate <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> (called "break loops")
 which are similar to the main <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> except for the
 <a href="prompt.html" title="29.8. Extensions-1.8. The Prompt">prompt</a> and the set of available commands.
 Commands must be typed literally, in any case,
 without surrounding quotes or white space.
 Each command has a keyword abbreviation,
 indicated in the second column.</p><div class="table"><a id="debugger-main-deb-step"></a><p class="title"><b>Table 25.1. Commands common to the main loop, the debugger and the stepper</b></p><table summary="Commands common to the main loop, the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Help</b></span></td><td align="center"><span><b class="command">:h</b></span></td><td align="center">prints a list of available commands</td></tr></tbody></table></div><div class="table"><a id="debugger-deb-step"></a><p class="title"><b>Table 25.2. Commands common to the debugger and the stepper</b></p><table summary="Commands common to the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Abort</b></span></td><td align="center"><span><b class="command">:a</b></span></td><td align="center">abort to the next most recent <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr><tr><td align="center"><span><b class="command">Unwind</b></span></td><td align="center"><span><b class="command">:uw</b></span></td><td align="center">abort to the next most recent <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr><tr><td align="center"><span><b class="command">Quit</b></span></td><td align="center"><span><b class="command">:q</b></span></td><td align="center">quit to the top <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr></tbody></table></div><p>The stack is organized into frames and other stack elements.
 Usually every invocation of an interpreted function and every
 evaluation of an interpreted form corresponds to one stack frame.
 Special forms such as <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><tt class="function">LET*</tt></a>, <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><tt class="function">UNWIND-PROTECT</tt></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><tt class="function">CATCH</tt></a>
 produce special kinds of stack frames.</p><p>In a break loop there is a current stack frame, which is initially
 the most recent stack frame but can be moved using the debugger commands
 <span><b class="command">Up</b></span> and <span><b class="command">Down</b></span>.</p><p>Evaluation of forms in a break loop occurs in the lexical
 environment of the current stack frame but in the dynamic environment
 of the debugger's caller.  This means that to inspect or modify a
 lexical variable all you have to do is to move to the current stack
 frame just below the frame that corresponds to the form or the function
 call that binds that variable.</p><p>There is a current "stack mode" which defines in how much
 detail the stack is shown by the stack related debugger commands.</p><div class="table"><a id="debugger-deb-step-1"></a><p class="title"><b>Table 25.3. Commands common to the debugger and the stepper</b></p><table summary="Commands common to the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Error</b></span></td><td align="center"><span><b class="command">:e</b></span></td><td align="center">print the last error message.</td></tr><tr><td align="center"><span><b class="command">Inspect</b></span></td><td align="center"><span><b class="command">:i</b></span></td><td align="center">inspect the last error message.</td></tr><tr><td align="center"><span><b class="command">Mode-1</b></span></td><td align="center"><span><b class="command">:m1</b></span></td><td align="center">sets the current mode to 1: all the stack elements are considered.
    This mode works fine for debugging compiled functions.</td></tr><tr><td align="center"><span><b class="command">Mode-2</b></span></td><td align="center"><span><b class="command">:m2</b></span></td><td align="center">sets the current mode to 2: all the frames are considered.
     </td></tr><tr><td align="center"><span><b class="command">Mode-3</b></span></td><td align="center"><span><b class="command">:m3</b></span></td><td align="center">sets the current mode to 3: only lexical frames (frames that
    correspond to special forms that modify the lexical
    environment) are considered.</td></tr><tr><td align="center"><span><b class="command">Mode-4</b></span></td><td align="center"><span><b class="command">:m4</b></span></td><td align="center">sets the current mode to 4 (the default): only <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> and
    <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frames are considered. Every evaluation of a form in the
    interpreter corresponds to an EVAL frame.</td></tr><tr><td align="center"><span><b class="command">Mode-5</b></span></td><td align="center"><span><b class="command">:m5</b></span></td><td align="center">sets the current mode to 5: only <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frames are
         considered. Every invocation of an interpreted function
         corresponds to one <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frame.</td></tr><tr><td align="center"><span><b class="command">Where</b></span></td><td align="center"><span><b class="command">:w</b></span></td><td align="center">shows the current stack frame.</td></tr><tr><td align="center"><span><b class="command">Up</b></span></td><td align="center"><span><b class="command">:u</b></span></td><td align="center">goes up one frame, i.e., to the caller if in mode-5
    </td></tr><tr><td align="center"><span><b class="command">Down</b></span></td><td align="center"><span><b class="command">:d</b></span></td><td align="center">does down one frame, i.e., to the callee if in mode-5
    </td></tr><tr><td align="center"><span><b class="command">Top</b></span></td><td align="center"><span><b class="command">:t</b></span></td><td align="center">goes to top frame, i.e., to the top-level form if in mode-4
    </td></tr><tr><td align="center"><span><b class="command">Bottom</b></span></td><td align="center"><span><b class="command">:b</b></span></td><td align="center">goes to bottom (most recent) frame, i.e., most probably to the
         form or function that caused the debugger to be entered.
    </td></tr><tr><td align="center"><span><b class="command">Backtrace</b></span></td><td align="center"><span><b class="command">:bt</b></span></td><td align="center">lists the stack in current mode, bottom frame first, top frame
     last.</td></tr><tr><td align="center"><span><b class="command">Backtrace-1</b></span></td><td align="center"><span><b class="command">:bt1</b></span></td><td align="center">lists the stack in mode 1.</td></tr><tr><td align="center"><span><b class="command">Backtrace-2</b></span></td><td align="center"><span><b class="command">:bt2</b></span></td><td align="center">lists the stack in mode 2.</td></tr><tr><td align="center"><span><b class="command">Backtrace-3</b></span></td><td align="center"><span><b class="command">:bt3</b></span></td><td align="center">lists the stack in mode 3.</td></tr><tr><td align="center"><span><b class="command">Backtrace-4</b></span></td><td align="center"><span><b class="command">:bt4</b></span></td><td align="center">lists the stack in mode 4.</td></tr><tr><td align="center"><span><b class="command">Backtrace-5</b></span></td><td align="center"><span><b class="command">:bt5</b></span></td><td align="center">lists the stack in mode 5.</td></tr><tr><td align="center"><span><b class="command">Frame-limit</b></span></td><td align="center"><span><b class="command">:fl</b></span></td><td align="center">set the frame-limit: this many frames will be printed in a
     backtrace at most.</td></tr><tr><td align="center"><span><b class="command">Backtrace-l</b></span></td><td align="center"><span><b class="command">:bl</b></span></td><td align="center">limit of frames to print will be prompted for.</td></tr></tbody></table></div><p>If the current stack frame is an <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a> frame, the
  following commands are available as well:</p><div class="table"><a id="debugger-eval-apply"></a><p class="title"><b>Table 25.4. Commands specific to <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><tt class="function">EVAL</tt></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><tt class="function">APPLY</tt></a></b></p><table summary="Commands specific to EVAL/APPLY" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Break+</b></span></td><td align="center"><span><b class="command">:br+</b></span></td><td align="center">sets a breakpoint in the current frame.  When the corresponding
     form or function will be left, the debugger will be entered again, with
     the variable <a href="environment-dict.html#trace-val"><tt class="varname">EXT:*TRACE-VALUES*</tt></a> containing a list of its values.</td></tr><tr><td align="center"><span><b class="command">Break-</b></span></td><td align="center"><span><b class="command">:br-</b></span></td><td align="center">removes a breakpoint from the current frame.</td></tr><tr><td align="center"><span><b class="command">Redo</b></span></td><td align="center"><span><b class="command">:rd</b></span></td><td align="center">re-evaluates the corresponding form or function call. This
     command can be used to restart parts of a computation without
     aborting it entirely.</td></tr><tr><td align="center"><span><b class="command">Return</b></span></td><td align="center"><span><b class="command">:rt</b></span></td><td align="center">leaves the current frame.  You will be prompted for the return
     values.</td></tr></tbody></table></div><div class="table"><a id="debugger-deb"></a><p class="title"><b>Table 25.5. Commands specific to the debugger</b></p><table summary="Commands specific to the debugger" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Continue</b></span></td><td align="center"><span><b class="command">:c</b></span></td><td align="center">continues evaluation of the program.</td></tr></tbody></table></div><div class="table"><a id="debugger-step"></a><p class="title"><b>Table 25.6. Commands specific to the stepper</b></p><table summary="Commands specific to the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><b class="command">Step</b></span></td><td align="center"><span><b class="command">:s</b></span></td><td align="center">step into a form: evaluate this form in single step mode
   </td></tr><tr><td align="center"><span><b class="command">Next</b></span></td><td align="center"><span><b class="command">:n</b></span></td><td align="center">step over a form: evaluate this form at once
   </td></tr><tr><td align="center"><span><b class="command">Over</b></span></td><td align="center"><span><b class="command">:o</b></span></td><td align="center">step over this level: evaluate at once up to the next return
   </td></tr><tr><td align="center"><span><b class="command">Continue</b></span></td><td align="center"><span><b class="command">:c</b></span></td><td align="center">switch off single step mode, continue evaluation
   </td></tr></tbody></table></div><p>The stepper is usually used like this: If some form returns a
 strange value or results in an error, call <tt class="sexp">(<a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><tt class="function">STEP</tt></a>
 <i class="replaceable"><tt>form</tt></i>)</tt> and navigate using the
 commands <span><b class="command">Step</b></span> and <span><b class="command">Next</b></span> until you
 reach the form you regard as responsible.  If you are too fast (execute
 <span><b class="command">Next</b></span> once and get the error), there is no way back;
 you have to restart the entire stepper session.  If you are too slow
 (stepped into a function or a form which certainly is OK), a couple of
 <span><b class="command">Next</b></span> commands or one <span><b class="command">Over</b></span> command
 will help.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="environment.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="environment.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="environment-dict.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 25. Environment
   [CLHS-25] </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 25.2. The Environment Dictionary
   [CLHS-25.2]</td></tr></table></div><div class="custom-footer"><hr width="100%" /><table width="100%"><tr><td align="left"><a href="http://clisp.cons.org"><img src="clisp.png" width="48" height="48" alt="[CLISP home]" /></a></td><td align="center"><a href="http://www.gnu.org"><img src="http://www.gnu.org/graphics/gnubanner.jpg" width="468" height="60" alt="[Come and see what GNU creates for YOU]" /></a></td><td align="right"><a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=1355&amp;amp;type=2" width="125" height="37" alt="[SourceForge]" /></a></td></tr></table></div></body></html>
