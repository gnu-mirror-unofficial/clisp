<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>30.7. Extensions-2.7. System Calls</title><link rel="stylesheet" href="impnotes.css" type="text/css"/><link rev="made" href="mailto:clisp-list@sf.net"/><meta name="generator" content="DocBook XSL Stylesheets V1.61.2"/><link rel="home" href="index.html" title="Implementation Notes for GNU CLISP."/><link rel="up" href="platform.html" title="Chapter 30. Extensions-2: Platform specific Extensions"/><link rel="previous" href="socket.html" title="30.6. Extensions-2.6. Socket Streams"/><link rel="next" href="quickstart.html" title="30.8. Extensions-2.8. Quickstarting delivery with CLISP"/></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">30.7. Extensions-2.7. System Calls</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="socket.html">Prev</a> </td><th width="60%" align="center">Chapter 30. Extensions-2: Platform specific Extensions</th><td width="20%" align="right"> <a accesskey="n" href="quickstart.html">Next</a></td></tr></table><hr/></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="syscalls"/>30.7. Extensions-2.7. System Calls</h2></div></div><div/></div><p>When <a href="http://clisp.cons.org" target="_top"><b class="command">CLISP</b></a> is configured with an option
 <tt class="option">--with-export-syscalls</tt>, some system calls are
 available from lisp, in package <a href="syscalls.html" title="30.7. Extensions-2.7. System Calls"><strong class="package">&#8220;<span class="quote">POSIX</span>&#8221;</strong></a>.</p><div class="variablelist"><dl><dt><tt class="sexp">(<tt class="function">POSIX:RESOLVE-HOST-IPADDR</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>host</tt></i>)</tt></dt><dd>Returns the <span class="type">hostent</span> struct (name,
   list of aliases, list of IP addresses as dotted quads (for IPv4) or
   coloned octets (for IPv6), address type - IPv4 or IPv6).
   When <i class="replaceable"><tt>host</tt></i> is omitted or <tt class="constant">:DEFAULT</tt>, return the data for the
   current host. When <i class="replaceable"><tt>host</tt></i> is given and is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, all the
   host database is returned as a list (this would be the contents of the
   <tt class="filename">/etc/hosts</tt> file on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system or
   <tt class="filename">${windir}/system32/etc/hosts</tt> on a Win32 system).
   This is an interface to <a href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyname.html" target="_top"><tt class="function">gethostbyname</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyaddr.html" target="_top"><tt class="function">gethostbyaddr</tt></a>.
  </dd><dt><tt class="sexp">(<tt class="function">POSIX:FILE-STAT</tt> <i class="replaceable"><tt>pathname</tt></i>
      <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>link-p</tt></i>)</tt></dt><dd><p>Return the stat struct.  <i class="replaceable"><tt>pathname</tt></i> can be a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><tt class="classname">STREAM</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><tt class="classname">PATHNAME</tt></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><tt class="classname">STRING</tt></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><tt class="classname">NUMBER</tt></a>
   (on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> system, meaning <a href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165" target="_top">file descriptor</a>).
   The first slot of the struct returned is the string or the number on
   which <a href="http://www.opengroup.org/onlinepubs/007904975/functions/stat.html" target="_top"><tt class="function">stat</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/fstat.html" target="_top"><tt class="function">fstat</tt></a>/<a href="http://www.opengroup.org/onlinepubs/007904975/functions/lstat.html" target="_top"><tt class="function">lstat</tt></a> was called.  The other 13 slots are
   numbers, members of the stat struct: device, inode, protection,
   number of hard links, owner's UID, owner's GID, device type, total
   size (bytes), blocksize for filesystem I/O, number of blocks
   allocated, atime, mtime, ctime (as the number of seconds since
   1900-01-01).  If the system does not support a particular field
   (e.g., Win32 does not have hard links), <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (or the default, like 1
   for the number of hard links for Win32 or DOS) is returned.
   </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
  </p></dd><dt><tt class="sexp">(<tt class="function">POSIX:USER-DATA</tt>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>user</tt></i>)</tt></dt><dd><p>Return the <span class="type">passwd</span> struct (name, encoded
   password, UID, GID, full name, home directory, shell).
   When <i class="replaceable"><tt>user</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, return all users.
   When <i class="replaceable"><tt>user</tt></i> is <tt class="constant">:DEFAULT</tt> or
   not supplied, return the information about the current user.
   If the system does not support a particular field (e.g., Win32 does
   not have a concept of a shell), <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a> (or the default, like
   <tt class="filename">c:\command.com</tt> for DOS) is returned.
   </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
  </p></dd><dt><tt class="sexp">(<tt class="function">POSIX:SYSINFO</tt>)</tt></dt><dd>Return a struct describing the OS, derived from
   <a href="http://www.opengroup.org/onlinepubs/007904975/functions/uname.html" target="_top"><tt class="function">uname</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/sysconf.html" target="_top"><tt class="function">sysconf</tt></a>.</dd><dt><tt class="sexp">(<tt class="function">POSIX:RESOURCE-USAGE-LIMITS</tt>)</tt>
   </dt><dd>Return 3 structs describing the resources usage and
    limits, derived from <a href="http://www.opengroup.org/onlinepubs/007904975/functions/getrlimit.html" target="_top"><tt class="function">getrlimit</tt></a> and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/getrusage.html" target="_top"><tt class="function">getrusage</tt></a>.
  </dd><dt><tt class="sexp">(<tt class="function">POSIX:ERF</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br/><tt class="sexp">(<tt class="function">POSIX:ERFC</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br/><tt class="sexp">(<tt class="function">POSIX:J0</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br/><tt class="sexp">(<tt class="function">POSIX:J1</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br/><tt class="sexp">(<tt class="function">POSIX:JN</tt>
       <i class="replaceable"><tt>integer</tt></i> <i class="replaceable"><tt>real</tt></i>)</tt><br/><tt class="sexp">(<tt class="function">POSIX:Y0</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br/><tt class="sexp">(<tt class="function">POSIX:Y1</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br/><tt class="sexp">(<tt class="function">POSIX:YN</tt>
       <i class="replaceable"><tt>integer</tt></i> <i class="replaceable"><tt>real</tt></i>)</tt><br/><tt class="sexp">(<tt class="function">POSIX:GAMMA</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt><br/><tt class="sexp">(<tt class="function">POSIX:LGAMMA</tt>
       <i class="replaceable"><tt>real</tt></i>)</tt></dt><dd><p>Compute the error functions, Bessel functions and
   Gamma.  These functions are required by the POSIX standard and should
   be available in libm.so.  Please note that these functions do not
   provide lisp-style error handling and precision, and do all the
   computations at the double float level.
  </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
 </p></dd><dt>
   <tt class="sexp">(<tt class="function">POSIX:STREAM-LOCK</tt> <i class="replaceable"><tt>stream</tt></i>
            <i class="replaceable"><tt>lock-p</tt></i>
            <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> (:BLOCK <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><tt class="constant">T</tt></a>) (:SHARED <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>))</tt></dt><dd><p>This is an interface to the <a href="http://www.opengroup.org/onlinepubs/007904975/functions/flockfile.html" target="_top"><tt class="function">flock</tt></a> system call.
   It sets or removes a discretionary file lock for the file associated
   with <i class="replaceable"><tt>stream</tt></i>, depending on <i class="replaceable"><tt>lock-p</tt></i>.
   When <i class="replaceable"><tt>block</tt></i> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>, the call is non-blocking,
   and when the file is already locked, it <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><tt class="function">SIGNAL</tt></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><tt class="classname">ERROR</tt></a>.
   When <i class="replaceable"><tt>shared</tt></i> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><tt class="constant">NIL</tt></a>,
   then lock can be shared between several callers.
   Several processes can set a <i class="replaceable"><tt>shared</tt></i> lock,
   but only one can set an <span class="emphasis"><em>exclusive</em></span> (i.e.,
   non-<i class="replaceable"><tt>shared</tt></i>) lock.
  </p><p>[<a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems only at this time, patches are welcome.]
 </p></dd><dt>
   <tt class="sexp">(<tt class="function">POSIX:COPY-FILE</tt>
    <i class="replaceable"><tt>source-path</tt></i>
    <i class="replaceable"><tt>destination-path</tt></i>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;KEY</tt></a> :METHOD :PRESERVE :IF-EXISTS :IF-DOES-NOT-EXIST)</tt></dt><dd><p>This is an interface to the <a href="http://www.opengroup.org/onlinepubs/007904975/functions/symlink.html" target="_top"><tt class="function">symlink</tt></a>
    (when <i class="replaceable"><tt>method</tt></i> is <tt class="constant">:SYMLINK</tt>),
    <a href="http://www.opengroup.org/onlinepubs/007904975/functions/link.html" target="_top"><tt class="function">link</tt></a> (when it is <tt class="constant">:HARDLINK</tt>), and <a href="http://www.opengroup.org/onlinepubs/007904975/functions/rename.html" target="_top"><tt class="function">rename</tt></a>
    (when it is <tt class="constant">:RENAME</tt>) system calls, as well as,
    you guessed it, a generic file copy utility
    (when <i class="replaceable"><tt>method</tt></i> is <tt class="constant">:COPY</tt>).
   </p><p>Both <i class="replaceable"><tt>source-path</tt></i> and
    <i class="replaceable"><tt>destination-path</tt></i> may be wild.
 </p></dd><dt>
   <tt class="sexp">(<tt class="function">POSIX:DUPLICATE-HANDLE</tt>
    <i class="replaceable"><tt>fd1</tt></i>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><tt class="literal">&amp;OPTIONAL</tt></a> <i class="replaceable"><tt>fd2</tt></i>)</tt></dt><dd>This is an interface to the <a href="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html" target="_top"><tt class="function">dup/dup2</tt></a> system calls on
   <a href="http://www.UNIX-systems.org/online.html" target="_top"><strong>UNIX</strong></a> systems and to <tt class="function">DuplicateHandle</tt> system
   call on <a href="http://www.willows.com/" target="_top"><strong>Win32</strong></a>.</dd></dl></div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="socket.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="platform.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="quickstart.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">30.6. Extensions-2.6. Socket Streams </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 30.8. Extensions-2.8. Quickstarting delivery with <b class="command">CLISP</b></td></tr></table></div><div class="custom-footer"><hr width="100%"/><table width="100%"><tr><td align="left"><a href="http://clisp.cons.org"><img src="clisp.png" width="48" height="48" alt="[CLISP home]"/></a></td><td align="center"><a href="http://www.gnu.org"><img src="http://www.gnu.org/graphics/gnubanner.jpg" width="468" height="60" alt="[Come and see what GNU creates for YOU]"/></a></td><td align="right"><a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=1355&amp;amp;type=2" width="125" height="37" alt="[SourceForge]"/></a></td></tr></table></div></body></html>
