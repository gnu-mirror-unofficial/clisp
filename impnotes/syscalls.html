<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Extensions-2.7. System Calls</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REV="MADE"
HREF="mailto:clisp-list@sf.net"><LINK
REL="HOME"
TITLE="Implementation Notes for GNU CLISP."
HREF="impnotes-top.html"><LINK
REL="UP"
TITLE="Extensions-2: Platform specific Extensions"
HREF="platform.html"><LINK
REL="PREVIOUS"
TITLE="Extensions-2.6. Socket Streams"
HREF="socket.html"><LINK
REL="NEXT"
TITLE="Extensions-2.8. Quickstarting delivery with CLISP"
HREF="quickstart.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="impnotes.css"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Implementation Notes for <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.: These notes document <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> version 2.30.</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="socket.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 30. Extensions-2: Platform specific Extensions</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="quickstart.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="syscalls">30.7. Extensions-2.7. System Calls</H1
><P
ALIGN="justify"
>When <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is configured with an option
 <TT
CLASS="option"
>--with-export-syscalls</TT
>, some system calls are
 available from lisp, in package <A
HREF="syscalls.html"
><SPAN
CLASS="QUOTE"
>"POSIX"</SPAN
></A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:RESOLVE-HOST-IPADDR</TT
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <TT
CLASS="replaceable"
><I
>host</I
></TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns the <SPAN
CLASS="type"
>hostent</SPAN
> struct (name,
   list of aliases, list of IP addresses as dotted quads (for IPv4) or
   coloned octets (for IPv6), address type - IPv4 or IPv6).
   When <TT
CLASS="replaceable"
><I
>host</I
></TT
> is omitted or <TT
CLASS="constant"
>:DEFAULT</TT
>, return the data for the
   current host. When <TT
CLASS="replaceable"
><I
>host</I
></TT
> is given and is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, all the
   host database is returned as a list (this would be the contents of the
   <TT
CLASS="filename"
>/etc/hosts</TT
> file on a <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> system or
   <TT
CLASS="filename"
>${windir}/system32/etc/hosts</TT
> on a Win32 system).
   This is an interface to <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyname.html"
TARGET="_top"
><TT
CLASS="function"
>gethostbyname</TT
></A
>/<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyaddr.html"
TARGET="_top"
><TT
CLASS="function"
>gethostbyaddr</TT
></A
>.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:FILE-STAT</TT
> <TT
CLASS="replaceable"
><I
>pathname</I
></TT
>
      <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <TT
CLASS="replaceable"
><I
>link-p</I
></TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the stat struct.  <TT
CLASS="replaceable"
><I
>pathname</I
></TT
> can be a
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><TT
CLASS="classname"
>STREAM</TT
></A
>, a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
TARGET="_top"
><TT
CLASS="classname"
>PATHNAME</TT
></A
>, a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><TT
CLASS="classname"
>STRING</TT
></A
> or a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><TT
CLASS="classname"
>NUMBER</TT
></A
>
   (on a <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> system, meaning file descriptor).
   The first slot of the struct returned is the string or the number on
   which <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/stat.html"
TARGET="_top"
><TT
CLASS="function"
>stat</TT
></A
>/<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/fstat.html"
TARGET="_top"
><TT
CLASS="function"
>fstat</TT
></A
>/<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/lstat.html"
TARGET="_top"
><TT
CLASS="function"
>lstat</TT
></A
> was called.  The other 13 slots are
   numbers, members of the stat struct: device, inode, protection,
   number of hard links, owner's UID, owner's GID, device type, total
   size (bytes), blocksize for filesystem I/O, number of blocks
   allocated, atime, mtime, ctime (as the number of seconds since
   1900-01-01).  If the system does not support a particular field
   (e.g., Win32 does not have hard links), <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
> (or the default, like 1
   for the number of hard links for Win32 or DOS) is returned.
   </P
><P
ALIGN="justify"
>[<A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems only at this time, patches are welcome.]
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:USER-DATA</TT
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <TT
CLASS="replaceable"
><I
>user</I
></TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the <SPAN
CLASS="type"
>passwd</SPAN
> struct (name, encoded
   password, UID, GID, full name, home directory, shell).
   When <TT
CLASS="replaceable"
><I
>user</I
></TT
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, return all users.
   When <TT
CLASS="replaceable"
><I
>user</I
></TT
> is <TT
CLASS="constant"
>:DEFAULT</TT
> or
   not supplied, return the information about the current user.
   If the system does not support a particular field (e.g., Win32 does
   not have a concept of a shell), <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
> (or the default, like
   <TT
CLASS="filename"
>c:\command.com</TT
> for DOS) is returned.
   </P
><P
ALIGN="justify"
>[<A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems only at this time, patches are welcome.]
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:SYSINFO</TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return a struct describing the OS, derived from
   <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/uname.html"
TARGET="_top"
><TT
CLASS="function"
>uname</TT
></A
> and <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/sysconf.html"
TARGET="_top"
><TT
CLASS="function"
>sysconf</TT
></A
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:RESOURCE-USAGE-LIMITS</TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return 3 structs describing the resources usage and
    limits, derived from <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/getrlimit.html"
TARGET="_top"
><TT
CLASS="function"
>getrlimit</TT
></A
> and <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/getrusage.html"
TARGET="_top"
><TT
CLASS="function"
>getrusage</TT
></A
>.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:ERF</TT
>
       <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
><BR><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:ERFC</TT
>
       <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
><BR><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:J0</TT
>
       <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
><BR><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:J1</TT
>
       <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
><BR><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:JN</TT
>
       <TT
CLASS="replaceable"
><I
>integer</I
></TT
> <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
><BR><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:Y0</TT
>
       <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
><BR><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:Y1</TT
>
       <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
><BR><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:YN</TT
>
       <TT
CLASS="replaceable"
><I
>integer</I
></TT
> <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
><BR><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:GAMMA</TT
>
       <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
><BR><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:LGAMMA</TT
>
       <TT
CLASS="replaceable"
><I
>real</I
></TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Compute the error functions, Bessel functions and
   Gamma.  These functions are required by the POSIX standard and should
   be available in libm.so.  Please note that these functions do not
   provide lisp-style error handling and precision, and do all the
   computations at the double float level.
  </P
><P
ALIGN="justify"
>[<A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems only at this time, patches are welcome.]
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:STREAM-LOCK</TT
> <TT
CLASS="replaceable"
><I
>stream</I
></TT
>
            <TT
CLASS="replaceable"
><I
>lock-p</I
></TT
>
            <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> (:BLOCK <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><TT
CLASS="constant"
>T</TT
></A
>) (:SHARED <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>))</TT
></DT
><DD
><P
ALIGN="justify"
>This is an interface to the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/flockfile.html"
TARGET="_top"
><TT
CLASS="function"
>flock</TT
></A
> system call.
   It sets or removes a discretionary file lock for the file associated
   with <TT
CLASS="replaceable"
><I
>stream</I
></TT
>, depending on <TT
CLASS="replaceable"
><I
>lock-p</I
></TT
>.
   When <TT
CLASS="replaceable"
><I
>block</I
></TT
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, the call is non-blocking,
   and when the file is already locked, it signals an error.
   When <TT
CLASS="replaceable"
><I
>shared</I
></TT
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>,
   then lock can be shared between several callers.
   Several processes can set a <TT
CLASS="replaceable"
><I
>shared</I
></TT
> lock,
   but only one can set an <I
CLASS="emphasis"
>exclusive</I
> (i.e.,
   non-<TT
CLASS="replaceable"
><I
>shared</I
></TT
>) lock.
  </P
><P
ALIGN="justify"
>[<A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems only at this time, patches are welcome.]
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:COPY-FILE</TT
>
    <TT
CLASS="replaceable"
><I
>source-path</I
></TT
>
    <TT
CLASS="replaceable"
><I
>destination-path</I
></TT
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :METHOD :PRESERVE :IF-EXISTS :IF-DOES-NOT-EXIST)</TT
></DT
><DD
><P
ALIGN="justify"
>This is an interface to the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/symlink.html"
TARGET="_top"
><TT
CLASS="function"
>symlink</TT
></A
>
    (when <TT
CLASS="replaceable"
><I
>method</I
></TT
> is <TT
CLASS="constant"
>:SYMLINK</TT
>),
    <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/link.html"
TARGET="_top"
><TT
CLASS="function"
>link</TT
></A
> (when it is <TT
CLASS="constant"
>:HARDLINK</TT
>), and <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/rename.html"
TARGET="_top"
><TT
CLASS="function"
>rename</TT
></A
>
    (when it is <TT
CLASS="constant"
>:RENAME</TT
>) system calls, as well as,
    you guessed it, a generic file copy utility
    (when <TT
CLASS="replaceable"
><I
>method</I
></TT
> is <TT
CLASS="constant"
>:COPY</TT
>).
   </P
><P
ALIGN="justify"
>Both <TT
CLASS="replaceable"
><I
>source-path</I
></TT
> and
    <TT
CLASS="replaceable"
><I
>destination-path</I
></TT
> may be wild.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<TT
CLASS="function"
>POSIX:DUPLICATE-HANDLE</TT
>
    <TT
CLASS="replaceable"
><I
>fd1</I
></TT
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <TT
CLASS="replaceable"
><I
>fd2</I
></TT
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This is an interface to the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html"
TARGET="_top"
><TT
CLASS="function"
>dup/dup2</TT
></A
> system calls on
   <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems and to <TT
CLASS="function"
>DuplicateHandle</TT
> system
   call on <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="socket.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="impnotes-top.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="quickstart.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Extensions-2.6. Socket Streams</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="platform.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Extensions-2.8. Quickstarting delivery with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></TD
></TR
></TABLE
></DIV
><div
class="custom-footer"
><hr
width="100%"><table
width="100%"
><tr
><td
align="left"
><a
href="http://clisp.cons.org"
><img
src="clisp.png"
width="48"
height="48"
alt="[CLISP home]"></a
></td
><td
align="center"
><a
href="http://www.gnu.org"
><img
src="http://www.gnu.org/graphics/gnubanner.jpg"
width="468"
height="60"
alt="[Come and see what GNU creates for YOU]"></a
></td
><td
align="right"
><a
href="http://sourceforge.net"
><img
src="http://sourceforge.net/sflogo.php?group_id=1355&amp;type=2"
width="125"
height="37"
alt="[SourceForge]"></a
></td
></tr
></table
></div
></BODY
></HTML
>