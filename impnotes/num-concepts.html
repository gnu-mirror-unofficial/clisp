<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Number Concepts
   [CLHS-12.1]</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REV="MADE"
HREF="mailto:clisp-list@sf.net"><LINK
REL="HOME"
TITLE="Implementation Notes for GNU CLISP."
HREF="impnotes-top.html"><LINK
REL="UP"
TITLE="Numbers
   [CLHS-12]"
HREF="numbers.html"><LINK
REL="PREVIOUS"
TITLE="Numbers
   [CLHS-12]"
HREF="numbers.html"><LINK
REL="NEXT"
TITLE="The Numbers Dictionary
   [CLHS-12.2]"
HREF="num-dict.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="impnotes.css"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Implementation Notes for <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.: These notes document <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> version 2.30.</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="numbers.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 12. Numbers
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-12.html"
TARGET="_top"
>[CLHS-12]</A
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="num-dict.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="num-concepts">12.2. Number Concepts
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1.html"
TARGET="_top"
>[CLHS-12.1]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="byte-type">12.2.1. Byte Operations on Integers
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-1-3-2.html"
TARGET="_top"
>[CLHS-12.1.1.3.2]</A
></H2
><P
ALIGN="justify"
>Byte specifiers are objects of built-in type <A
HREF="num-concepts.html#byte-type"
><SPAN
CLASS="type"
>BYTE</SPAN
></A
>,
 not <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><TT
CLASS="classname"
>INTEGER</TT
></A
>s.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="float-subst">12.2.2. Rule of Float Substitutability
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-3-3.html"
TARGET="_top"
>[CLHS-12.1.3.3]</A
></H2
><P
ALIGN="justify"
>When a mathematical function may return an exact (rational) or
 inexact (floating-point) result, it always returns the exact result.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="float-comp">12.2.3. Floating-point Computations
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-4.html"
TARGET="_top"
>[CLHS-12.1.4]</A
></H2
><P
ALIGN="justify"
>There are four floating point types: <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SHORT-FLOAT</TT
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SINGLE-FLOAT</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>DOUBLE-FLOAT</TT
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>LONG-FLOAT</TT
></A
>:</P
><DIV
CLASS="table"
><A
NAME="floating-types-table"><P
><B
>Table 12-1. floating point types</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR
><TH
ALIGN="CENTER"
VALIGN="MIDDLE"
>type</TH
><TH
ALIGN="CENTER"
VALIGN="MIDDLE"
>sign</TH
><TH
ALIGN="CENTER"
VALIGN="MIDDLE"
>mantissa</TH
><TH
ALIGN="CENTER"
VALIGN="MIDDLE"
>exponent</TH
><TH
ALIGN="CENTER"
VALIGN="MIDDLE"
>comment</TH
></TR
></THEAD
><TBODY
><TR
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SHORT-FLOAT</TT
></A
></TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>1 bit</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>16+1 bits</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>8 bits</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>immediate</TD
></TR
><TR
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SINGLE-FLOAT</TT
></A
></TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>1 bit</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>23+1 bits</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>8 bits</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
><A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
></TD
></TR
><TR
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>DOUBLE-FLOAT</TT
></A
></TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>1 bit</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>52+1 bits</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>11 bits</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
><A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
></TD
></TR
><TR
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>LONG-FLOAT</TT
></A
></TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>1 bit</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>&#62;=64 bits</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>32 bits</TD
><TD
ALIGN="CENTER"
VALIGN="MIDDLE"
>variable
 length</TD
></TR
></TBODY
></TABLE
></DIV
><P
ALIGN="justify"
>The single and double float formats are those of the <A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
>
 <SPAN
CLASS="QUOTE"
>"Standard for Binary Floating-Point Arithmetic"</SPAN
>,
 except that <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> does not support features like
 <TT
CLASS="literal"
>±0</TT
>, <TT
CLASS="literal"
>±inf</TT
>,
 <TT
CLASS="literal"
>NaN</TT
>, gradual underflow, etc.
 (<A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> does not make use of these features.)
 This is why <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html"
TARGET="_top"
><TT
CLASS="varname"
>*FEATURES*</TT
></A
> does not contain the
 <TT
CLASS="constant"
>:IEEE-FLOATING-POINT</TT
> keyword.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="lfd"><B
>Arbitrary Precision Floats. </B
>Long floats have variable mantissa length, which is a
 multiple of 16 (or 32, depending on the word size of the processor).
 The default length used when long floats are read is given by the place
 <TT
CLASS="sexp"
>(<A
HREF="num-concepts.html#lfd"
><TT
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</TT
></A
>)</TT
>.  It can be set by <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="num-concepts.html#lfd"
><TT
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</TT
></A
>)
 <TT
CLASS="replaceable"
><I
>n</I
></TT
>)</TT
>, where <TT
CLASS="replaceable"
><I
>n</I
></TT
> is a positive integer.  E.g., <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><TT
CLASS="function"
>SETF</TT
></A
> (<A
HREF="num-concepts.html#lfd"
><TT
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</TT
></A
>) 3322)</TT
> sets the default precision
 of long floats to about 1000 decimal digits.</P
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="flocont">12.2.3.1. Rule of Float Precision Contagion
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html"
TARGET="_top"
>[CLHS-12.1.4.4]</A
></H3
><P
ALIGN="justify"
>The floating point contagion is controlled by the variable
 <A
HREF="num-concepts.html#flocont"
><TT
CLASS="varname"
>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</TT
></A
>.  When it is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, contagion is done as per the
 <A
HREF="references.html#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="references.html#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
>: <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SHORT-FLOAT</TT
></A
> &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SINGLE-FLOAT</TT
></A
> &#8594;
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>DOUBLE-FLOAT</TT
></A
> &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>LONG-FLOAT</TT
></A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Rationale:</DT
><DD
><P
ALIGN="justify"
>See it pragmatically: save what you can and let
  others worry about the rest.</P
></DD
><DT
>Brief:</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> knows the number's precision, not accuracy, so
  preserving the precision can be accomplished reliably, while anything
  relating to the accuracy is just a speculation - only the user
  (programmer) knows what it is in each case.
 </P
></DD
><DT
>Detailed:</DT
><DD
><P
ALIGN="justify"
>A computer float is an approximation of a real number.
  One can think of it as a random variable with the mean equal to
  itself and standard deviation equal to half the last significant digit.
  E.g., <TT
CLASS="literal"
>1.5</TT
> is actually <TT
CLASS="literal"
>1.5±0.05</TT
>.
  Consider adding <TT
CLASS="literal"
>1.5</TT
> and <TT
CLASS="literal"
>1.75</TT
>.
  <A
HREF="references.html#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="references.html#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> requires that <TT
CLASS="sexp"
>(+ 1.5 1.75)</TT
>
  returns <TT
CLASS="literal"
>3.25</TT
>, while traditional <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> would return
  <TT
CLASS="literal"
>3.3</TT
>.  The implied random variables are:
  <TT
CLASS="literal"
>3.25±0.005</TT
> and <TT
CLASS="literal"
>3.3±0.05</TT
>.
  Note that the traditional <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> way <B
CLASS="emphasis"
>does</B
>
  lie about the mean: the mean <B
CLASS="emphasis"
>is</B
>
  <TT
CLASS="literal"
>3.25</TT
> and nothing else, while the standard way
  <B
CLASS="emphasis"
>could</B
> be lying about the deviation
  (accuracy): if the implied accuracy of <TT
CLASS="literal"
>1.5 (0.05)</TT
>
  is its actual accuracy, then the accuracy of the result cannot be
  smaller that that.  Therefore, since <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> has no way of knowing the
  actual accuracy, <A
HREF="references.html#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="references.html#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> (and all the other standard engineering
  programming languages, like <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>, FORTRAN etc) decides that
  keeping the accuracy correct is the business of the programmer, while
  the language should preserve what it can - the precision.
  </P
></DD
><DT
>Experience:</DT
><DD
><P
ALIGN="justify"
> Rounding errors accumulate, and if a computation
  is conducted with insufficient precision, an outright incorrect
  result can be returned.
  (E.g., <TT
CLASS="literal"
>E(x<SUP
>2</SUP
>) -
  E(x)<SUP
>2</SUP
></TT
> can be negative!)
  The user should not mix floats of different precision (that's what
  <A
HREF="num-concepts.html#warn-fpc"
><TT
CLASS="varname"
>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</TT
></A
> is for), but one should not be penalized for this too
  harshly.</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>When <A
HREF="num-concepts.html#flocont"
><TT
CLASS="varname"
>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</TT
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, the traditional <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> method is used,
 namely the result of an arithmetic operation whose arguments are of
 different float types is rounded to the float format of the shortest
 (least precise) of the arguments: <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
TARGET="_top"
><TT
CLASS="classname"
>RATIONAL</TT
></A
> &#8594;
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>LONG-FLOAT</TT
></A
> &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>DOUBLE-FLOAT</TT
></A
> &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SINGLE-FLOAT</TT
></A
>
 &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SHORT-FLOAT</TT
></A
> (in contrast to <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html"
TARGET="_top"
>12.1.4.4 Rule of Float Precision
 Contagion</A
>!)</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Rationale:</DT
><DD
><P
ALIGN="justify"
> See it mathematically.  Add intervals:
  <TT
CLASS="literal"
>{1.0 ± 1e-8} + {1.0 ± 1e-16} = {2.0 ±
  1e-8}</TT
>.  So, if we add <TT
CLASS="literal"
>1.0s0</TT
> and
  <TT
CLASS="literal"
>1.0d0</TT
>, we should get <TT
CLASS="literal"
>2.0s0</TT
>.
  </P
></DD
><DT
>Brief:</DT
><DD
><P
ALIGN="justify"
>Do not suggest accuracy of a result by giving it a
  precision that is greater than its accuracy.
  </P
></DD
><DT
>Example:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(- (+ 1.7 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><TT
CLASS="constant"
>PI</TT
></A
>) <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><TT
CLASS="constant"
>PI</TT
></A
>)</TT
>
  should not return <TT
CLASS="literal"
>1.700000726342836417234L0</TT
>, it
  should return <TT
CLASS="literal"
>1.7f0</TT
> (or
  <TT
CLASS="literal"
>1.700001f0</TT
> if there were rounding errors).
  </P
></DD
><DT
>Experience:</DT
><DD
><P
ALIGN="justify"
>If in a computation using thousands of short floats,
  a long float (like <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><TT
CLASS="constant"
>PI</TT
></A
>) happens to be used, the long precision should
  not propagate throughout all the intermediate values. Otherwise, the
  long result would look precise, but its accuracy is only that of a
  short float; furthermore much computation time would be lost by
  calculating with long floats when only short floats would be needed.
  </P
></DD
></DL
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="warn-fpc"><B
>Variable <A
HREF="num-concepts.html#warn-fpc"
><TT
CLASS="varname"
>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</TT
></A
>. </B
>If the variable <A
HREF="num-concepts.html#warn-fpc"
><TT
CLASS="varname"
>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</TT
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><TT
CLASS="constant"
>NIL</TT
></A
>, a warning is emitted for
 every coercion involving different floating-point types.
</P
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="complex-comp">12.2.4. Complex Computations
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-5.html"
TARGET="_top"
>[CLHS-12.1.5]</A
></H2
><P
ALIGN="justify"
>Complex numbers can have a real part and an imaginary part of
 different types. For example, <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html"
TARGET="_top"
><TT
CLASS="function"
>SQRT</TT
></A
>
 -9.0)</TT
> evaluates to the number <TT
CLASS="literal"
>#C(0 3.0)</TT
>,
 which has a real part of exactly <TT
CLASS="literal"
>0</TT
>, not only
 <TT
CLASS="literal"
>0.0</TT
> (which would mean "approximately 0").</P
><P
ALIGN="justify"
>The type specifier for this is <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><TT
CLASS="classname"
>COMPLEX</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><TT
CLASS="classname"
>INTEGER</TT
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><TT
CLASS="classname"
>SINGLE-FLOAT</TT
></A
>)</TT
>, and <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><TT
CLASS="classname"
>COMPLEX</TT
></A
> <TT
CLASS="varname"
>type-of-real-part</TT
>
 <TT
CLASS="varname"
>type-of-imaginary-part</TT
>)</TT
> in general.</P
><P
ALIGN="justify"
>The type specifier <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><TT
CLASS="classname"
>COMPLEX</TT
></A
>
 <TT
CLASS="replaceable"
><I
>type</I
></TT
>)</TT
> is equivalent to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><TT
CLASS="classname"
>COMPLEX</TT
></A
> <TT
CLASS="replaceable"
><I
>type</I
></TT
> <TT
CLASS="replaceable"
><I
>type</I
></TT
>)</TT
>.</P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-5-3.html"
TARGET="_top"
>[CLHS-12.1.5.3]</A
></H2
><P
ALIGN="justify"
>Complex numbers can have a real part and an imaginary part of
 different types.  If the imaginary part is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><TT
CLASS="function"
>EQL</TT
></A
> to
 <TT
CLASS="literal"
>0</TT
>, the number is automatically converted to a real
 number.</P
><P
ALIGN="justify"
>This has the advantage that
   <TT
CLASS="sexp"
>(let ((x (sqrt -9.0))) (* x x))</TT
>
 - instead of evaluating to <TT
CLASS="literal"
>#C(-9.0 0.0)</TT
>,
 with <TT
CLASS="replaceable"
><I
>x</I
></TT
> = <TT
CLASS="literal"
>#C(0.0 3.0)</TT
> - evaluates to
 <TT
CLASS="literal"
>#C(-9.0 0)</TT
> = <TT
CLASS="literal"
>-9.0</TT
>,
 with <TT
CLASS="replaceable"
><I
>x</I
></TT
> = <TT
CLASS="literal"
>#C(0 3.0)</TT
>.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="numbers.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="impnotes-top.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="num-dict.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Numbers
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-12.html"
TARGET="_top"
>[CLHS-12]</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="numbers.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>The Numbers Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_numbers_dictionary.html"
TARGET="_top"
>[CLHS-12.2]</A
></TD
></TR
></TABLE
></DIV
><div
class="custom-footer"
><hr
width="100%"><table
width="100%"
><tr
><td
align="left"
><a
href="http://clisp.cons.org"
><img
src="clisp.png"
width="48"
height="48"
alt="[CLISP home]"></a
></td
><td
align="center"
><a
href="http://www.gnu.org"
><img
src="http://www.gnu.org/graphics/gnubanner.jpg"
width="468"
height="60"
alt="[Come and see what GNU creates for YOU]"></a
></td
><td
align="right"
><a
href="http://sourceforge.net"
><img
src="http://sourceforge.net/sflogo.php?group_id=1355&amp;type=2"
width="125"
height="37"
alt="[SourceForge]"></a
></td
></tr
></table
></div
></BODY
></HTML
>